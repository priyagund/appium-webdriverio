{"version":3,"file":"build-wda.js","names":["DEFAULT_SIM_NAME","build","xcodeVersion","getAndCheckXcodeVersion","iosVersion","getAndCheckIosSdkVersion","deviceName","translateDeviceName","device","getExistingSim","platformVersion","wda","WebDriverAgent","iosSdkVersion","showXcodeLog","xcodebuild","start","require","main","module","asyncify"],"sources":["../../lib/build-wda.js"],"sourcesContent":["import { WebDriverAgent } from 'appium-webdriveragent';\nimport { translateDeviceName, getAndCheckXcodeVersion, getAndCheckIosSdkVersion } from './utils';\nimport { getExistingSim } from './simulator-management';\nimport { asyncify } from 'asyncbox';\n\nconst DEFAULT_SIM_NAME = 'iPhone 12';\n\n// TODO: allow passing in all the various build params as CLI args\nasync function build () {\n  const xcodeVersion = await getAndCheckXcodeVersion();\n  const iosVersion = await getAndCheckIosSdkVersion();\n  const deviceName = translateDeviceName(iosVersion, DEFAULT_SIM_NAME);\n  const device = await getExistingSim({\n    platformVersion: iosVersion,\n    deviceName\n  });\n  const wda = new WebDriverAgent(xcodeVersion, {\n    iosSdkVersion: iosVersion,\n    platformVersion: iosVersion,\n    showXcodeLog: true,\n    device,\n  });\n  await wda.xcodebuild.start(true);\n}\n\nif (require.main === module) {\n  asyncify(build);\n}\n\nexport default build;\n"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AAEA,MAAMA,gBAAgB,GAAG,WAAzB;;AAGA,eAAeC,KAAf,GAAwB;EACtB,MAAMC,YAAY,GAAG,MAAM,IAAAC,8BAAA,GAA3B;EACA,MAAMC,UAAU,GAAG,MAAM,IAAAC,+BAAA,GAAzB;EACA,MAAMC,UAAU,GAAG,IAAAC,0BAAA,EAAoBH,UAApB,EAAgCJ,gBAAhC,CAAnB;EACA,MAAMQ,MAAM,GAAG,MAAM,IAAAC,mCAAA,EAAe;IAClCC,eAAe,EAAEN,UADiB;IAElCE;EAFkC,CAAf,CAArB;EAIA,MAAMK,GAAG,GAAG,IAAIC,oCAAJ,CAAmBV,YAAnB,EAAiC;IAC3CW,aAAa,EAAET,UAD4B;IAE3CM,eAAe,EAAEN,UAF0B;IAG3CU,YAAY,EAAE,IAH6B;IAI3CN;EAJ2C,CAAjC,CAAZ;EAMA,MAAMG,GAAG,CAACI,UAAJ,CAAeC,KAAf,CAAqB,IAArB,CAAN;AACD;;AAED,IAAIC,OAAO,CAACC,IAAR,KAAiBC,MAArB,EAA6B;EAC3B,IAAAC,kBAAA,EAASnB,KAAT;AACD;;eAEcA,K"}