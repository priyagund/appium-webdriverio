"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.extensions = exports.default = exports.commands = void 0;
exports.gesturesChainToString = gesturesChainToString;
exports.helpers = void 0;

require("source-map-support/register");

var _driver = require("appium/driver");

var _support = require("appium/support");

var _lodash = _interopRequireDefault(require("lodash"));

var _logger = _interopRequireDefault(require("../logger"));

const SUPPORTED_GESTURE_DIRECTIONS = ['up', 'down', 'left', 'right'];
const helpers = {},
      extensions = {},
      commands = {};
exports.commands = commands;
exports.extensions = extensions;
exports.helpers = helpers;

function toElementId(opts = {}) {
  if (opts.element) {
    _logger.default.info(`The 'element' argument name is deprecated. Consider using 'elementId' instead`);
  }

  const el = opts.elementId || opts.element;
  return el ? _support.util.unwrapElement(el) : null;
}

async function toElementOrApplicationId(driver, opts = {}) {
  return toElementId(opts) || _support.util.unwrapElement(await driver.findNativeElementOrElements(`class name`, `XCUIElementTypeApplication`, false));
}

commands.moveTo = async function moveTo(el, xoffset = 0, yoffset = 0) {
  el = _support.util.unwrapElement(el);

  if (this.isWebContext()) {
    let {
      x,
      y
    } = await this.getLocation(el);
    let coords = {
      x: x + xoffset,
      y: y + yoffset
    };
    this.curWebCoords = coords;
    let atomsElement = this.getAtomsElement(el);
    let relCoords = {
      x: xoffset,
      y: yoffset
    };
    await this.executeAtom('move_mouse', [atomsElement, relCoords]);
  } else {
    if (_lodash.default.isNil(el)) {
      if (!this.curCoords) {
        throw new _driver.errors.UnknownException('Current cursor position unknown, please use moveTo with an element the first time.');
      }

      this.curCoords = {
        x: this.curCoords.x + xoffset,
        y: this.curCoords.y + yoffset
      };
    } else {
      let elPos = await this.getLocation(el);
      this.curCoords = {
        x: elPos.x + xoffset,
        y: elPos.y + yoffset
      };
    }
  }
};

function requireFloatParameter(paramName, paramValue, methodName) {
  if (_lodash.default.isUndefined(paramValue)) {
    throw new _driver.errors.InvalidArgumentError(`"${paramName}" parameter is mandatory for "${methodName}" call`);
  }

  const result = parseFloat(paramValue);

  if (isNaN(result)) {
    throw new _driver.errors.InvalidArgumentError(`"${paramName}" parameter should be a valid number. "${paramValue}" is given instead`);
  }

  return result;
}

function requireIntParameter(paramName, paramValue, methodName) {
  if (_lodash.default.isUndefined(paramValue)) {
    throw new _driver.errors.InvalidArgumentError(`"${paramName}" parameter is mandatory for "${methodName}" call`);
  }

  const result = parseInt(paramValue, 10);

  if (isNaN(result)) {
    throw new _driver.errors.InvalidArgumentError(`"${paramName}" parameter should be a valid integer. "${paramValue}" is given instead`);
  }

  return result;
}

commands.mobileShake = async function mobileShake() {
  if (!this.isSimulator()) {
    throw new _driver.errors.UnknownError('Shake is not supported on real devices');
  }

  await this.opts.device.shake();
};

commands.click = async function click(el) {
  if (!this.isWebContext()) {
    return await this.nativeClick(el);
  }

  el = _support.util.unwrapElement(el);

  if ((await this.settings.getSettings()).nativeWebTap || (await this.settings.getSettings()).nativeWebTapStrict) {
    this.log.debug('Using native web tap');
    await this.nativeWebTap(el);
  } else {
    const atomsElement = this.getAtomsElement(el);
    return await this.executeAtom('click', [atomsElement]);
  }
};

function gesturesChainToString(gestures, keysToInclude = ['options']) {
  return gestures.map(item => {
    let otherKeys = _lodash.default.difference(_lodash.default.keys(item), ['action']);

    otherKeys = _lodash.default.isArray(keysToInclude) ? _lodash.default.intersection(otherKeys, keysToInclude) : otherKeys;

    if (otherKeys.length) {
      return `${item.action}` + `(${_lodash.default.map(otherKeys, x => x + '=' + (_lodash.default.isPlainObject(item[x]) ? JSON.stringify(item[x]) : item[x])).join(', ')})`;
    }

    return item.action;
  }).join('-');
}

commands.performActions = async function performActions(actions) {
  this.log.debug(`Received the following W3C actions: ${JSON.stringify(actions, null, '  ')}`);
  const preprocessedActions = actions.map(action => Object.assign({}, action, action.type === 'pointer' ? {
    parameters: {
      pointerType: 'touch'
    }
  } : {})).map(action => {
    const modifiedAction = _lodash.default.clone(action) || {};
    modifiedAction.actions = (action.actions || []).filter(innerAction => !(innerAction.type === 'pause' && innerAction.duration === 0));
    return modifiedAction;
  });
  this.log.debug(`Preprocessed actions: ${JSON.stringify(preprocessedActions, null, '  ')}`);
  return await this.proxyCommand('/actions', 'POST', {
    actions: preprocessedActions
  });
};

commands.releaseActions = function releaseActions() {
  this.log.warn('On this platform, releaseActions is a no-op');
};

commands.performTouch = async function performTouch(gestures) {
  this.log.debug(`Received the following touch action: ${gesturesChainToString(gestures)}`);

  try {
    return await this.proxyCommand('/wda/touch/perform', 'POST', {
      actions: gestures
    });
  } catch (e) {
    if (!this.isWebContext()) {
      throw e;
    }

    this.log.errorAndThrow('The Touch API is aimed for usage in NATIVE context. ' + 'Consider using "execute" API with custom events trigger script ' + `to emulate touch events being in WEBVIEW context. Original error: ${e.message}`);
  }
};

commands.performMultiAction = async function performMultiAction(actions) {
  this.log.debug(`Received the following multi touch action:`);

  for (let i in actions) {
    this.log.debug(`    ${parseInt(i, 10) + 1}: ${_lodash.default.map(actions[i], 'action').join('-')}`);
  }

  try {
    return await this.proxyCommand('/wda/touch/multi/perform', 'POST', {
      actions
    });
  } catch (e) {
    if (!this.isWebContext()) {
      throw e;
    }

    this.log.errorAndThrow('The MultiTouch API is aimed for usage in NATIVE context. ' + 'Consider using "execute" API with custom events trigger script ' + `to emulate multitouch events being in WEBVIEW context. Original error: ${e.message}`);
  }
};

commands.nativeClick = async function nativeClick(el) {
  el = _support.util.unwrapElement(el);
  let endpoint = `/element/${el}/click`;
  return await this.proxyCommand(endpoint, 'POST', {});
};

commands.mobileScrollToElement = async function mobileScrollToElement(opts = {}) {
  const elementId = await toElementId(opts);

  if (!elementId) {
    throw new _driver.errors.InvalidArgumentError('Element id must be provided');
  }

  return await this.proxyCommand(`/wda/element/${elementId}/scrollTo`, 'POST', {});
};

helpers.mobileScroll = async function mobileScroll(opts = {}) {
  const {
    name,
    direction,
    predicateString,
    toVisible,
    distance
  } = opts;
  const params = {};

  if (name) {
    params.name = name;
  } else if (direction) {
    if (!SUPPORTED_GESTURE_DIRECTIONS.includes(_lodash.default.toLower(direction))) {
      throw new _driver.errors.InvalidArgumentError(`'direction' must be one of: ${SUPPORTED_GESTURE_DIRECTIONS}`);
    }

    params.direction = direction;
  } else if (predicateString) {
    params.predicateString = predicateString;
  } else if (toVisible) {
    params.toVisible = toVisible;
  } else {
    throw new _driver.errors.InvalidArgumentError('Mobile scroll supports the following strategies: name, direction, predicateString, and toVisible. ' + 'Specify one of these');
  }

  if (!_lodash.default.isNil(distance)) {
    params.distance = distance;
  }

  const elementId = await toElementOrApplicationId(this, opts);
  return await this.proxyCommand(`/wda/element/${elementId}/scroll`, 'POST', params);
};

helpers.mobileSwipe = async function mobileSwipe(opts = {}) {
  const {
    direction,
    velocity
  } = opts;

  if (!SUPPORTED_GESTURE_DIRECTIONS.includes(_lodash.default.toLower(direction))) {
    throw new _driver.errors.InvalidArgumentError(`'direction' must be one of: ${SUPPORTED_GESTURE_DIRECTIONS}`);
  }

  const params = {
    direction
  };

  if (!_lodash.default.isNil(velocity)) {
    params.velocity = velocity;
  }

  const elementId = await toElementOrApplicationId(this, opts);
  return await this.proxyCommand(`/wda/element/${elementId}/swipe`, 'POST', params);
};

helpers.mobilePinch = async function mobilePinch(opts = {}) {
  const params = {
    scale: requireFloatParameter('scale', opts.scale, 'pinch'),
    velocity: requireFloatParameter('velocity', opts.velocity, 'pinch')
  };
  const elementId = await toElementOrApplicationId(this, opts);
  return await this.proxyCommand(`/wda/element/${elementId}/pinch`, 'POST', params);
};

helpers.mobileDoubleTap = async function mobileDoubleTap(opts = {}) {
  const elementId = toElementId(opts);

  if (elementId) {
    return await this.proxyCommand(`/wda/element/${elementId}/doubleTap`, 'POST');
  }

  const params = {
    x: requireFloatParameter('x', opts.x, 'doubleTap'),
    y: requireFloatParameter('y', opts.y, 'doubleTap')
  };
  return await this.proxyCommand('/wda/doubleTap', 'POST', params);
};

helpers.mobileTwoFingerTap = async function mobileTwoFingerTap(opts = {}) {
  const elementId = await toElementOrApplicationId(this, opts);
  return await this.proxyCommand(`/wda/element/${elementId}/twoFingerTap`, 'POST');
};

helpers.mobileTouchAndHold = async function mobileTouchAndHold(opts = {}) {
  const params = {
    duration: requireFloatParameter('duration', opts.duration, 'touchAndHold')
  };
  const elementId = toElementId(opts);

  if (elementId) {
    return await this.proxyCommand(`/wda/element/${elementId}/touchAndHold`, 'POST', params);
  }

  params.x = requireFloatParameter('x', opts.x, 'touchAndHold');
  params.y = requireFloatParameter('y', opts.y, 'touchAndHold');
  return await this.proxyCommand('/wda/touchAndHold', 'POST', params);
};

helpers.mobileTap = async function mobileTap(opts = {}) {
  const params = {
    x: requireFloatParameter('x', opts.x, 'tap'),
    y: requireFloatParameter('y', opts.y, 'tap')
  };
  const elementId = toElementId(opts) || '0';
  return await this.proxyCommand(`/wda/tap/${elementId}`, 'POST', params);
};

helpers.mobileDragFromToForDuration = async function mobileDragFromToForDuration(opts = {}) {
  const params = {
    duration: requireFloatParameter('duration', opts.duration, 'dragFromToForDuration'),
    fromX: requireFloatParameter('fromX', opts.fromX, 'dragFromToForDuration'),
    fromY: requireFloatParameter('fromY', opts.fromY, 'dragFromToForDuration'),
    toX: requireFloatParameter('toX', opts.toX, 'dragFromToForDuration'),
    toY: requireFloatParameter('toY', opts.toY, 'dragFromToForDuration')
  };
  const elementId = toElementId(opts);
  return elementId ? await this.proxyCommand(`/wda/element/${elementId}/dragfromtoforduration`, 'POST', params) : await this.proxyCommand('/wda/dragfromtoforduration', 'POST', params);
};

helpers.mobileDragFromToWithVelocity = async function mobileDragFromToWithVelocity(opts = {}) {
  const params = {
    pressDuration: requireFloatParameter('pressDuration', opts.pressDuration, 'dragFromToWithVelocity'),
    holdDuration: requireFloatParameter('holdDuration', opts.holdDuration, 'dragFromToWithVelocity'),
    velocity: requireFloatParameter('velocity', opts.velocity, 'dragFromToWithVelocity')
  };
  const fromElementId = opts.fromElementId ? _support.util.unwrapElement(opts.fromElementId) : null;

  if (fromElementId) {
    const toElement = opts.toElementId ? _support.util.unwrapElement(opts.toElementId) : null;

    if (!toElement) {
      throw new _driver.errors.InvalidArgumentError(`"toElementId" parameter is mandatory for "dragFromToWithVelocity" call`);
    }

    params.toElement = toElement;
    return await this.proxyCommand(`/wda/element/${fromElementId}/pressAndDragWithVelocity`, 'POST', params);
  }

  params.fromX = requireFloatParameter('fromX', opts.fromX, 'dragFromToWithVelocity');
  params.fromY = requireFloatParameter('fromY', opts.fromY, 'dragFromToWithVelocity');
  params.toX = requireFloatParameter('toX', opts.toX, 'dragFromToWithVelocity');
  params.toY = requireFloatParameter('toY', opts.toY, 'dragFromToWithVelocity');
  return await this.proxyCommand('/wda/pressAndDragWithVelocity', 'POST', params);
};

helpers.mobileTapWithNumberOfTaps = async function mobileTapWithNumberOfTaps(opts = {}) {
  const elementId = toElementId(opts);

  if (!elementId) {
    throw new _driver.errors.InvalidArgumentError('Element id is expected to be set for tapWithNumberOfTaps method');
  }

  const params = {
    numberOfTaps: requireIntParameter('numberOfTaps', opts.numberOfTaps, 'tapWithNumberOfTaps'),
    numberOfTouches: requireIntParameter('numberOfTouches', opts.numberOfTouches, 'tapWithNumberOfTaps')
  };
  return await this.proxyCommand(`/wda/element/${elementId}/tapWithNumberOfTaps`, 'POST', params);
};

helpers.mobileForcePress = async function mobileForcePress(opts = {}) {
  const {
    x,
    y,
    duration,
    pressure
  } = opts;
  const elementId = toElementId(opts);
  const endpoint = elementId ? `/wda/element/${elementId}/forceTouch` : `/wda/forceTouch`;
  return await this.proxyCommand(endpoint, 'POST', {
    x,
    y,
    duration,
    pressure
  });
};

helpers.mobileSelectPickerWheelValue = async function mobileSelectPickerWheelValue(opts = {}) {
  const elementId = toElementId(opts);

  if (!elementId) {
    throw new _driver.errors.InvalidArgumentError('Element id is expected to be set for selectPickerWheelValue method');
  }

  if (!_lodash.default.isString(opts.order) || !['next', 'previous'].includes(opts.order.toLowerCase())) {
    throw new _driver.errors.InvalidArgumentError(`The mandatory 'order' parameter is expected to be equal either to 'next' or 'previous'. ` + `'${opts.order}' is given instead`);
  }

  const params = {
    order: opts.order
  };

  if (opts.offset) {
    params.offset = requireFloatParameter('offset', opts.offset, 'selectPickerWheelValue');
  }

  return await this.proxyCommand(`/wda/pickerwheel/${elementId}/select`, 'POST', params);
};

helpers.mobileRotateElement = async function mobileRotateElement(opts = {}) {
  const elementId = toElementId(opts);

  if (!elementId) {
    throw new _driver.errors.InvalidArgumentError('Element id is expected to be set for rotateElement method');
  }

  const params = {
    rotation: requireFloatParameter('rotation', opts.rotation, 'rotateElement'),
    velocity: requireFloatParameter('velocity', opts.velocity, 'rotateElement')
  };
  return await this.proxyCommand(`/wda/element/${elementId}/rotate`, 'POST', params);
};

helpers.getCoordinates = async function getCoordinates(gesture) {
  let coordinates = {
    x: 0,
    y: 0,
    areOffsets: false
  };
  let optionX = null;

  if (gesture.options.x) {
    optionX = requireFloatParameter('x', gesture.options.x, 'getCoordinates');
  }

  let optionY = null;

  if (gesture.options.y) {
    optionY = requireFloatParameter('y', gesture.options.y, 'getCoordinates');
  }

  const elementId = toElementId(gesture.options);

  if (elementId) {
    let rect = await this.getElementRect(elementId);
    let pos = {
      x: rect.x,
      y: rect.y
    };
    let size = {
      w: rect.width,
      h: rect.height
    };
    let offsetX = 0;
    let offsetY = 0;

    if (optionX || optionY) {
      offsetX = optionX || 0;
      offsetY = optionY || 0;
    } else {
      offsetX = size.w / 2;
      offsetY = size.h / 2;
    }

    coordinates.x = pos.x + offsetX;
    coordinates.y = pos.y + offsetY;
  } else {
    coordinates.areOffsets = gesture.action === 'moveTo';
    coordinates.x = optionX || 0;
    coordinates.y = optionY || 0;
  }

  return coordinates;
};

helpers.applyMoveToOffset = function applyMoveToOffset(firstCoordinates, secondCoordinates) {
  if (secondCoordinates.areOffsets) {
    return {
      x: firstCoordinates.x + secondCoordinates.x,
      y: firstCoordinates.y + secondCoordinates.y
    };
  } else {
    return secondCoordinates;
  }
};

Object.assign(extensions, helpers, commands);
var _default = extensions;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTVVBQT1JURURfR0VTVFVSRV9ESVJFQ1RJT05TIiwiaGVscGVycyIsImV4dGVuc2lvbnMiLCJjb21tYW5kcyIsInRvRWxlbWVudElkIiwib3B0cyIsImVsZW1lbnQiLCJsb2ciLCJpbmZvIiwiZWwiLCJlbGVtZW50SWQiLCJ1dGlsIiwidW53cmFwRWxlbWVudCIsInRvRWxlbWVudE9yQXBwbGljYXRpb25JZCIsImRyaXZlciIsImZpbmROYXRpdmVFbGVtZW50T3JFbGVtZW50cyIsIm1vdmVUbyIsInhvZmZzZXQiLCJ5b2Zmc2V0IiwiaXNXZWJDb250ZXh0IiwieCIsInkiLCJnZXRMb2NhdGlvbiIsImNvb3JkcyIsImN1cldlYkNvb3JkcyIsImF0b21zRWxlbWVudCIsImdldEF0b21zRWxlbWVudCIsInJlbENvb3JkcyIsImV4ZWN1dGVBdG9tIiwiXyIsImlzTmlsIiwiY3VyQ29vcmRzIiwiZXJyb3JzIiwiVW5rbm93bkV4Y2VwdGlvbiIsImVsUG9zIiwicmVxdWlyZUZsb2F0UGFyYW1ldGVyIiwicGFyYW1OYW1lIiwicGFyYW1WYWx1ZSIsIm1ldGhvZE5hbWUiLCJpc1VuZGVmaW5lZCIsIkludmFsaWRBcmd1bWVudEVycm9yIiwicmVzdWx0IiwicGFyc2VGbG9hdCIsImlzTmFOIiwicmVxdWlyZUludFBhcmFtZXRlciIsInBhcnNlSW50IiwibW9iaWxlU2hha2UiLCJpc1NpbXVsYXRvciIsIlVua25vd25FcnJvciIsImRldmljZSIsInNoYWtlIiwiY2xpY2siLCJuYXRpdmVDbGljayIsInNldHRpbmdzIiwiZ2V0U2V0dGluZ3MiLCJuYXRpdmVXZWJUYXAiLCJuYXRpdmVXZWJUYXBTdHJpY3QiLCJkZWJ1ZyIsImdlc3R1cmVzQ2hhaW5Ub1N0cmluZyIsImdlc3R1cmVzIiwia2V5c1RvSW5jbHVkZSIsIm1hcCIsIml0ZW0iLCJvdGhlcktleXMiLCJkaWZmZXJlbmNlIiwia2V5cyIsImlzQXJyYXkiLCJpbnRlcnNlY3Rpb24iLCJsZW5ndGgiLCJhY3Rpb24iLCJpc1BsYWluT2JqZWN0IiwiSlNPTiIsInN0cmluZ2lmeSIsImpvaW4iLCJwZXJmb3JtQWN0aW9ucyIsImFjdGlvbnMiLCJwcmVwcm9jZXNzZWRBY3Rpb25zIiwiT2JqZWN0IiwiYXNzaWduIiwidHlwZSIsInBhcmFtZXRlcnMiLCJwb2ludGVyVHlwZSIsIm1vZGlmaWVkQWN0aW9uIiwiY2xvbmUiLCJmaWx0ZXIiLCJpbm5lckFjdGlvbiIsImR1cmF0aW9uIiwicHJveHlDb21tYW5kIiwicmVsZWFzZUFjdGlvbnMiLCJ3YXJuIiwicGVyZm9ybVRvdWNoIiwiZSIsImVycm9yQW5kVGhyb3ciLCJtZXNzYWdlIiwicGVyZm9ybU11bHRpQWN0aW9uIiwiaSIsImVuZHBvaW50IiwibW9iaWxlU2Nyb2xsVG9FbGVtZW50IiwibW9iaWxlU2Nyb2xsIiwibmFtZSIsImRpcmVjdGlvbiIsInByZWRpY2F0ZVN0cmluZyIsInRvVmlzaWJsZSIsImRpc3RhbmNlIiwicGFyYW1zIiwiaW5jbHVkZXMiLCJ0b0xvd2VyIiwibW9iaWxlU3dpcGUiLCJ2ZWxvY2l0eSIsIm1vYmlsZVBpbmNoIiwic2NhbGUiLCJtb2JpbGVEb3VibGVUYXAiLCJtb2JpbGVUd29GaW5nZXJUYXAiLCJtb2JpbGVUb3VjaEFuZEhvbGQiLCJtb2JpbGVUYXAiLCJtb2JpbGVEcmFnRnJvbVRvRm9yRHVyYXRpb24iLCJmcm9tWCIsImZyb21ZIiwidG9YIiwidG9ZIiwibW9iaWxlRHJhZ0Zyb21Ub1dpdGhWZWxvY2l0eSIsInByZXNzRHVyYXRpb24iLCJob2xkRHVyYXRpb24iLCJmcm9tRWxlbWVudElkIiwidG9FbGVtZW50IiwibW9iaWxlVGFwV2l0aE51bWJlck9mVGFwcyIsIm51bWJlck9mVGFwcyIsIm51bWJlck9mVG91Y2hlcyIsIm1vYmlsZUZvcmNlUHJlc3MiLCJwcmVzc3VyZSIsIm1vYmlsZVNlbGVjdFBpY2tlcldoZWVsVmFsdWUiLCJpc1N0cmluZyIsIm9yZGVyIiwidG9Mb3dlckNhc2UiLCJvZmZzZXQiLCJtb2JpbGVSb3RhdGVFbGVtZW50Iiwicm90YXRpb24iLCJnZXRDb29yZGluYXRlcyIsImdlc3R1cmUiLCJjb29yZGluYXRlcyIsImFyZU9mZnNldHMiLCJvcHRpb25YIiwib3B0aW9ucyIsIm9wdGlvblkiLCJyZWN0IiwiZ2V0RWxlbWVudFJlY3QiLCJwb3MiLCJzaXplIiwidyIsIndpZHRoIiwiaCIsImhlaWdodCIsIm9mZnNldFgiLCJvZmZzZXRZIiwiYXBwbHlNb3ZlVG9PZmZzZXQiLCJmaXJzdENvb3JkaW5hdGVzIiwic2Vjb25kQ29vcmRpbmF0ZXMiXSwic291cmNlcyI6WyIuLi8uLi8uLi9saWIvY29tbWFuZHMvZ2VzdHVyZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBlcnJvcnMgfSBmcm9tICdhcHBpdW0vZHJpdmVyJztcbmltcG9ydCB7IHV0aWwgfSBmcm9tICdhcHBpdW0vc3VwcG9ydCc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IGxvZyBmcm9tICcuLi9sb2dnZXInO1xuXG5jb25zdCBTVVBQT1JURURfR0VTVFVSRV9ESVJFQ1RJT05TID0gWyd1cCcsICdkb3duJywgJ2xlZnQnLCAncmlnaHQnXTtcblxuY29uc3QgaGVscGVycyA9IHt9LCBleHRlbnNpb25zID0ge30sIGNvbW1hbmRzID0ge307XG5cbmZ1bmN0aW9uIHRvRWxlbWVudElkIChvcHRzID0ge30pIHtcbiAgaWYgKG9wdHMuZWxlbWVudCkge1xuICAgIGxvZy5pbmZvKGBUaGUgJ2VsZW1lbnQnIGFyZ3VtZW50IG5hbWUgaXMgZGVwcmVjYXRlZC4gQ29uc2lkZXIgdXNpbmcgJ2VsZW1lbnRJZCcgaW5zdGVhZGApO1xuICB9XG4gIGNvbnN0IGVsID0gb3B0cy5lbGVtZW50SWQgfHwgb3B0cy5lbGVtZW50O1xuICByZXR1cm4gZWwgPyB1dGlsLnVud3JhcEVsZW1lbnQoZWwpIDogbnVsbDtcbn1cblxuYXN5bmMgZnVuY3Rpb24gdG9FbGVtZW50T3JBcHBsaWNhdGlvbklkIChkcml2ZXIsIG9wdHMgPSB7fSkge1xuICByZXR1cm4gdG9FbGVtZW50SWQob3B0cylcbiAgICB8fCB1dGlsLnVud3JhcEVsZW1lbnQoYXdhaXQgZHJpdmVyLmZpbmROYXRpdmVFbGVtZW50T3JFbGVtZW50cyhgY2xhc3MgbmFtZWAsIGBYQ1VJRWxlbWVudFR5cGVBcHBsaWNhdGlvbmAsIGZhbHNlKSk7XG59XG5cbmNvbW1hbmRzLm1vdmVUbyA9IGFzeW5jIGZ1bmN0aW9uIG1vdmVUbyAoZWwsIHhvZmZzZXQgPSAwLCB5b2Zmc2V0ID0gMCkge1xuICBlbCA9IHV0aWwudW53cmFwRWxlbWVudChlbCk7XG5cbiAgaWYgKHRoaXMuaXNXZWJDb250ZXh0KCkpIHtcbiAgICBsZXQge3gsIHl9ID0gYXdhaXQgdGhpcy5nZXRMb2NhdGlvbihlbCk7XG4gICAgbGV0IGNvb3JkcyA9IHtcbiAgICAgIHg6IHggKyB4b2Zmc2V0LFxuICAgICAgeTogeSArIHlvZmZzZXRcbiAgICB9O1xuICAgIHRoaXMuY3VyV2ViQ29vcmRzID0gY29vcmRzO1xuICAgIGxldCBhdG9tc0VsZW1lbnQgPSB0aGlzLmdldEF0b21zRWxlbWVudChlbCk7XG4gICAgbGV0IHJlbENvb3JkcyA9IHt4OiB4b2Zmc2V0LCB5OiB5b2Zmc2V0fTtcbiAgICBhd2FpdCB0aGlzLmV4ZWN1dGVBdG9tKCdtb3ZlX21vdXNlJywgW2F0b21zRWxlbWVudCwgcmVsQ29vcmRzXSk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKF8uaXNOaWwoZWwpKSB7XG4gICAgICBpZiAoIXRoaXMuY3VyQ29vcmRzKSB7XG4gICAgICAgIHRocm93IG5ldyBlcnJvcnMuVW5rbm93bkV4Y2VwdGlvbihcbiAgICAgICAgICAnQ3VycmVudCBjdXJzb3IgcG9zaXRpb24gdW5rbm93biwgcGxlYXNlIHVzZSBtb3ZlVG8gd2l0aCBhbiBlbGVtZW50IHRoZSBmaXJzdCB0aW1lLicpO1xuICAgICAgfVxuICAgICAgdGhpcy5jdXJDb29yZHMgPSB7XG4gICAgICAgIHg6IHRoaXMuY3VyQ29vcmRzLnggKyB4b2Zmc2V0LFxuICAgICAgICB5OiB0aGlzLmN1ckNvb3Jkcy55ICsgeW9mZnNldFxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGVsUG9zID0gYXdhaXQgdGhpcy5nZXRMb2NhdGlvbihlbCk7XG4gICAgICB0aGlzLmN1ckNvb3JkcyA9IHtcbiAgICAgICAgeDogZWxQb3MueCArIHhvZmZzZXQsXG4gICAgICAgIHk6IGVsUG9zLnkgKyB5b2Zmc2V0XG4gICAgICB9O1xuICAgIH1cbiAgfVxufTtcblxuZnVuY3Rpb24gcmVxdWlyZUZsb2F0UGFyYW1ldGVyIChwYXJhbU5hbWUsIHBhcmFtVmFsdWUsIG1ldGhvZE5hbWUpIHtcbiAgaWYgKF8uaXNVbmRlZmluZWQocGFyYW1WYWx1ZSkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLkludmFsaWRBcmd1bWVudEVycm9yKGBcIiR7cGFyYW1OYW1lfVwiIHBhcmFtZXRlciBpcyBtYW5kYXRvcnkgZm9yIFwiJHttZXRob2ROYW1lfVwiIGNhbGxgKTtcbiAgfVxuICBjb25zdCByZXN1bHQgPSBwYXJzZUZsb2F0KHBhcmFtVmFsdWUpO1xuICBpZiAoaXNOYU4ocmVzdWx0KSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZEFyZ3VtZW50RXJyb3IoYFwiJHtwYXJhbU5hbWV9XCIgcGFyYW1ldGVyIHNob3VsZCBiZSBhIHZhbGlkIG51bWJlci4gXCIke3BhcmFtVmFsdWV9XCIgaXMgZ2l2ZW4gaW5zdGVhZGApO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIHJlcXVpcmVJbnRQYXJhbWV0ZXIgKHBhcmFtTmFtZSwgcGFyYW1WYWx1ZSwgbWV0aG9kTmFtZSkge1xuICBpZiAoXy5pc1VuZGVmaW5lZChwYXJhbVZhbHVlKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZEFyZ3VtZW50RXJyb3IoYFwiJHtwYXJhbU5hbWV9XCIgcGFyYW1ldGVyIGlzIG1hbmRhdG9yeSBmb3IgXCIke21ldGhvZE5hbWV9XCIgY2FsbGApO1xuICB9XG4gIGNvbnN0IHJlc3VsdCA9IHBhcnNlSW50KHBhcmFtVmFsdWUsIDEwKTtcbiAgaWYgKGlzTmFOKHJlc3VsdCkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLkludmFsaWRBcmd1bWVudEVycm9yKGBcIiR7cGFyYW1OYW1lfVwiIHBhcmFtZXRlciBzaG91bGQgYmUgYSB2YWxpZCBpbnRlZ2VyLiBcIiR7cGFyYW1WYWx1ZX1cIiBpcyBnaXZlbiBpbnN0ZWFkYCk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuY29tbWFuZHMubW9iaWxlU2hha2UgPSBhc3luYyBmdW5jdGlvbiBtb2JpbGVTaGFrZSAoKSB7XG4gIGlmICghdGhpcy5pc1NpbXVsYXRvcigpKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5Vbmtub3duRXJyb3IoJ1NoYWtlIGlzIG5vdCBzdXBwb3J0ZWQgb24gcmVhbCBkZXZpY2VzJyk7XG4gIH1cbiAgYXdhaXQgdGhpcy5vcHRzLmRldmljZS5zaGFrZSgpO1xufTtcblxuY29tbWFuZHMuY2xpY2sgPSBhc3luYyBmdW5jdGlvbiBjbGljayAoZWwpIHtcbiAgaWYgKCF0aGlzLmlzV2ViQ29udGV4dCgpKSB7XG4gICAgLy8gdGhlcmUgYXJlIG11bHRpcGxlIGNvbW1hbmRzIHRoYXQgbWFwIGhlcmUsIHNvIG1hbnVhbGx5IHByb3h5XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMubmF0aXZlQ2xpY2soZWwpO1xuICB9XG4gIGVsID0gdXRpbC51bndyYXBFbGVtZW50KGVsKTtcbiAgaWYgKChhd2FpdCB0aGlzLnNldHRpbmdzLmdldFNldHRpbmdzKCkpLm5hdGl2ZVdlYlRhcCB8fCAoYXdhaXQgdGhpcy5zZXR0aW5ncy5nZXRTZXR0aW5ncygpKS5uYXRpdmVXZWJUYXBTdHJpY3QpIHtcbiAgICAvLyBhdG9tcy1iYXNlZCBjbGlja3MgZG9uJ3QgYWx3YXlzIHdvcmsgaW4gc2FmYXJpIDdcbiAgICB0aGlzLmxvZy5kZWJ1ZygnVXNpbmcgbmF0aXZlIHdlYiB0YXAnKTtcbiAgICBhd2FpdCB0aGlzLm5hdGl2ZVdlYlRhcChlbCk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3QgYXRvbXNFbGVtZW50ID0gdGhpcy5nZXRBdG9tc0VsZW1lbnQoZWwpO1xuICAgIHJldHVybiBhd2FpdCB0aGlzLmV4ZWN1dGVBdG9tKCdjbGljaycsIFthdG9tc0VsZW1lbnRdKTtcbiAgfVxufTtcblxuZnVuY3Rpb24gZ2VzdHVyZXNDaGFpblRvU3RyaW5nIChnZXN0dXJlcywga2V5c1RvSW5jbHVkZSA9IFsnb3B0aW9ucyddKSB7XG4gIHJldHVybiBnZXN0dXJlcy5tYXAoKGl0ZW0pID0+IHtcbiAgICBsZXQgb3RoZXJLZXlzID0gXy5kaWZmZXJlbmNlKF8ua2V5cyhpdGVtKSwgWydhY3Rpb24nXSk7XG4gICAgb3RoZXJLZXlzID0gXy5pc0FycmF5KGtleXNUb0luY2x1ZGUpID8gXy5pbnRlcnNlY3Rpb24ob3RoZXJLZXlzLCBrZXlzVG9JbmNsdWRlKSA6IG90aGVyS2V5cztcbiAgICBpZiAob3RoZXJLZXlzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGAke2l0ZW0uYWN0aW9ufWAgK1xuICAgICAgICBgKCR7Xy5tYXAob3RoZXJLZXlzLCAoeCkgPT4geCArICc9JyArIChfLmlzUGxhaW5PYmplY3QoaXRlbVt4XSkgPyBKU09OLnN0cmluZ2lmeShpdGVtW3hdKSA6IGl0ZW1beF0pKS5qb2luKCcsICcpfSlgO1xuICAgIH1cbiAgICByZXR1cm4gaXRlbS5hY3Rpb247XG4gIH0pLmpvaW4oJy0nKTtcbn1cblxuY29tbWFuZHMucGVyZm9ybUFjdGlvbnMgPSBhc3luYyBmdW5jdGlvbiBwZXJmb3JtQWN0aW9ucyAoYWN0aW9ucykge1xuICB0aGlzLmxvZy5kZWJ1ZyhgUmVjZWl2ZWQgdGhlIGZvbGxvd2luZyBXM0MgYWN0aW9uczogJHtKU09OLnN0cmluZ2lmeShhY3Rpb25zLCBudWxsLCAnICAnKX1gKTtcbiAgLy8gVGhpcyBpcyBtYW5kYXRvcnksIHNpbmNlIFdEQSBvbmx5IHN1cHBvcnRzIFRPVUNIIHBvaW50ZXIgdHlwZVxuICAvLyBhbmQgU2VsZW5pdW0gQVBJIHVzZXMgTU9VU0UgYXMgdGhlIGRlZmF1bHQgb25lXG4gIGNvbnN0IHByZXByb2Nlc3NlZEFjdGlvbnMgPSBhY3Rpb25zXG4gICAgLm1hcCgoYWN0aW9uKSA9PiBPYmplY3QuYXNzaWduKHt9LCBhY3Rpb24sIGFjdGlvbi50eXBlID09PSAncG9pbnRlcicgPyB7XG4gICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgIHBvaW50ZXJUeXBlOiAndG91Y2gnXG4gICAgICB9XG4gICAgfSA6IHt9KSlcbiAgICAubWFwKChhY3Rpb24pID0+IHtcbiAgICAgIGNvbnN0IG1vZGlmaWVkQWN0aW9uID0gXy5jbG9uZShhY3Rpb24pIHx8IHt9O1xuICAgICAgLy8gU2VsZW5pdW0gQVBJIHVuZXhwZWN0ZWRseSBpbnNlcnRzIHplcm8gcGF1c2VzLCB3aGljaCBhcmUgbm90IHN1cHBvcnRlZCBieSBXREFcbiAgICAgIG1vZGlmaWVkQWN0aW9uLmFjdGlvbnMgPSAoYWN0aW9uLmFjdGlvbnMgfHwgW10pXG4gICAgICAgIC5maWx0ZXIoKGlubmVyQWN0aW9uKSA9PiAhKGlubmVyQWN0aW9uLnR5cGUgPT09ICdwYXVzZScgJiYgaW5uZXJBY3Rpb24uZHVyYXRpb24gPT09IDApKTtcbiAgICAgIHJldHVybiBtb2RpZmllZEFjdGlvbjtcbiAgICB9KTtcbiAgdGhpcy5sb2cuZGVidWcoYFByZXByb2Nlc3NlZCBhY3Rpb25zOiAke0pTT04uc3RyaW5naWZ5KHByZXByb2Nlc3NlZEFjdGlvbnMsIG51bGwsICcgICcpfWApO1xuICByZXR1cm4gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoJy9hY3Rpb25zJywgJ1BPU1QnLCB7YWN0aW9uczogcHJlcHJvY2Vzc2VkQWN0aW9uc30pO1xufTtcblxuY29tbWFuZHMucmVsZWFzZUFjdGlvbnMgPSBmdW5jdGlvbiByZWxlYXNlQWN0aW9ucyAoKSB7XG4gIHRoaXMubG9nLndhcm4oJ09uIHRoaXMgcGxhdGZvcm0sIHJlbGVhc2VBY3Rpb25zIGlzIGEgbm8tb3AnKTtcbn07XG5cbmNvbW1hbmRzLnBlcmZvcm1Ub3VjaCA9IGFzeW5jIGZ1bmN0aW9uIHBlcmZvcm1Ub3VjaCAoZ2VzdHVyZXMpIHtcbiAgdGhpcy5sb2cuZGVidWcoYFJlY2VpdmVkIHRoZSBmb2xsb3dpbmcgdG91Y2ggYWN0aW9uOiAke2dlc3R1cmVzQ2hhaW5Ub1N0cmluZyhnZXN0dXJlcyl9YCk7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucHJveHlDb21tYW5kKCcvd2RhL3RvdWNoL3BlcmZvcm0nLCAnUE9TVCcsIHthY3Rpb25zOiBnZXN0dXJlc30pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKCF0aGlzLmlzV2ViQ29udGV4dCgpKSB7XG4gICAgICB0aHJvdyBlO1xuICAgIH1cbiAgICB0aGlzLmxvZy5lcnJvckFuZFRocm93KCdUaGUgVG91Y2ggQVBJIGlzIGFpbWVkIGZvciB1c2FnZSBpbiBOQVRJVkUgY29udGV4dC4gJyArXG4gICAgICAnQ29uc2lkZXIgdXNpbmcgXCJleGVjdXRlXCIgQVBJIHdpdGggY3VzdG9tIGV2ZW50cyB0cmlnZ2VyIHNjcmlwdCAnICtcbiAgICAgIGB0byBlbXVsYXRlIHRvdWNoIGV2ZW50cyBiZWluZyBpbiBXRUJWSUVXIGNvbnRleHQuIE9yaWdpbmFsIGVycm9yOiAke2UubWVzc2FnZX1gKTtcbiAgfVxufTtcblxuY29tbWFuZHMucGVyZm9ybU11bHRpQWN0aW9uID0gYXN5bmMgZnVuY3Rpb24gcGVyZm9ybU11bHRpQWN0aW9uIChhY3Rpb25zKSB7XG4gIHRoaXMubG9nLmRlYnVnKGBSZWNlaXZlZCB0aGUgZm9sbG93aW5nIG11bHRpIHRvdWNoIGFjdGlvbjpgKTtcbiAgZm9yIChsZXQgaSBpbiBhY3Rpb25zKSB7XG4gICAgdGhpcy5sb2cuZGVidWcoYCAgICAke3BhcnNlSW50KGksIDEwKSArIDF9OiAke18ubWFwKGFjdGlvbnNbaV0sICdhY3Rpb24nKS5qb2luKCctJyl9YCk7XG4gIH1cbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoJy93ZGEvdG91Y2gvbXVsdGkvcGVyZm9ybScsICdQT1NUJywge2FjdGlvbnN9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmICghdGhpcy5pc1dlYkNvbnRleHQoKSkge1xuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gICAgdGhpcy5sb2cuZXJyb3JBbmRUaHJvdygnVGhlIE11bHRpVG91Y2ggQVBJIGlzIGFpbWVkIGZvciB1c2FnZSBpbiBOQVRJVkUgY29udGV4dC4gJyArXG4gICAgICAnQ29uc2lkZXIgdXNpbmcgXCJleGVjdXRlXCIgQVBJIHdpdGggY3VzdG9tIGV2ZW50cyB0cmlnZ2VyIHNjcmlwdCAnICtcbiAgICAgIGB0byBlbXVsYXRlIG11bHRpdG91Y2ggZXZlbnRzIGJlaW5nIGluIFdFQlZJRVcgY29udGV4dC4gT3JpZ2luYWwgZXJyb3I6ICR7ZS5tZXNzYWdlfWApO1xuICB9XG59O1xuXG5jb21tYW5kcy5uYXRpdmVDbGljayA9IGFzeW5jIGZ1bmN0aW9uIG5hdGl2ZUNsaWNrIChlbCkge1xuICBlbCA9IHV0aWwudW53cmFwRWxlbWVudChlbCk7XG4gIGxldCBlbmRwb2ludCA9IGAvZWxlbWVudC8ke2VsfS9jbGlja2A7XG4gIHJldHVybiBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZChlbmRwb2ludCwgJ1BPU1QnLCB7fSk7XG59O1xuXG4vKlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9mYWNlYm9vay9XZWJEcml2ZXJBZ2VudC9ibG9iL21hc3Rlci9XZWJEcml2ZXJBZ2VudExpYi9Db21tYW5kcy9GQkVsZW1lbnRDb21tYW5kcy5tXG4gKiB0byBnZXQgdGhlIGluZm8gYWJvdXQgYXZhaWxhYmxlIFdEQSBnZXN0dXJlcyBBUElcbiAqXG4gKiBTZWUgaHR0cHM6Ly9kZXZlbG9wZXIuYXBwbGUuY29tL3JlZmVyZW5jZS94Y3Rlc3QveGN1aWVsZW1lbnQgYW5kXG4gKiBodHRwczovL2RldmVsb3Blci5hcHBsZS5jb20vcmVmZXJlbmNlL3hjdGVzdC94Y3VpY29vcmRpbmF0ZSB0byBnZXQgdGhlIGRldGFpbGVkIGRlc2NyaXB0aW9uIG9mXG4gKiBhbGwgWENUZXN0IGdlc3R1cmVzXG4qL1xuXG5jb21tYW5kcy5tb2JpbGVTY3JvbGxUb0VsZW1lbnQgPSBhc3luYyBmdW5jdGlvbiBtb2JpbGVTY3JvbGxUb0VsZW1lbnQgKG9wdHMgPSB7fSkge1xuICBjb25zdCBlbGVtZW50SWQgPSBhd2FpdCB0b0VsZW1lbnRJZChvcHRzKTtcbiAgaWYgKCFlbGVtZW50SWQpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLkludmFsaWRBcmd1bWVudEVycm9yKCdFbGVtZW50IGlkIG11c3QgYmUgcHJvdmlkZWQnKTtcbiAgfVxuICByZXR1cm4gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoYC93ZGEvZWxlbWVudC8ke2VsZW1lbnRJZH0vc2Nyb2xsVG9gLCAnUE9TVCcsIHt9KTtcbn07XG5cbmhlbHBlcnMubW9iaWxlU2Nyb2xsID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlU2Nyb2xsIChvcHRzID0ge30pIHtcbiAgLy8gV0RBIHN1cHBvcnRzIGZvdXIgc2Nyb2xsaW5nIHN0cmF0ZWdpZXM6IHByZWRpY2F0aW9uIGJhc2VkIG9uIG5hbWUsIGRpcmVjdGlvbixcbiAgLy8gcHJlZGljYXRlU3RyaW5nLCBhbmQgdG9WaXNpYmxlLCBpbiB0aGF0IG9yZGVyXG4gIGNvbnN0IHtcbiAgICBuYW1lLFxuICAgIGRpcmVjdGlvbixcbiAgICBwcmVkaWNhdGVTdHJpbmcsXG4gICAgdG9WaXNpYmxlLFxuICAgIGRpc3RhbmNlLFxuICB9ID0gb3B0cztcbiAgY29uc3QgcGFyYW1zID0ge307XG4gIGlmIChuYW1lKSB7XG4gICAgcGFyYW1zLm5hbWUgPSBuYW1lO1xuICB9IGVsc2UgaWYgKGRpcmVjdGlvbikge1xuICAgIGlmICghU1VQUE9SVEVEX0dFU1RVUkVfRElSRUNUSU9OUy5pbmNsdWRlcyhfLnRvTG93ZXIoZGlyZWN0aW9uKSkpIHtcbiAgICAgIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZEFyZ3VtZW50RXJyb3IoYCdkaXJlY3Rpb24nIG11c3QgYmUgb25lIG9mOiAke1NVUFBPUlRFRF9HRVNUVVJFX0RJUkVDVElPTlN9YCk7XG4gICAgfVxuICAgIHBhcmFtcy5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG4gIH0gZWxzZSBpZiAocHJlZGljYXRlU3RyaW5nKSB7XG4gICAgcGFyYW1zLnByZWRpY2F0ZVN0cmluZyA9IHByZWRpY2F0ZVN0cmluZztcbiAgfSBlbHNlIGlmICh0b1Zpc2libGUpIHtcbiAgICBwYXJhbXMudG9WaXNpYmxlID0gdG9WaXNpYmxlO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZEFyZ3VtZW50RXJyb3IoXG4gICAgICAnTW9iaWxlIHNjcm9sbCBzdXBwb3J0cyB0aGUgZm9sbG93aW5nIHN0cmF0ZWdpZXM6IG5hbWUsIGRpcmVjdGlvbiwgcHJlZGljYXRlU3RyaW5nLCBhbmQgdG9WaXNpYmxlLiAnICtcbiAgICAgICdTcGVjaWZ5IG9uZSBvZiB0aGVzZScpO1xuICB9XG4gIC8vIHdlIGNhbiBhbHNvIG9wdGlvbmFsbHkgcGFzcyBhIGRpc3RhbmNlIHdoaWNoIGFwcGVhcnMgdG8gYmUgYSByYXRpbyBvZlxuICAvLyBzY3JlZW4gaGVpZ2h0LCBzbyAxLjAgbWVhbnMgYSBmdWxsIHNjcmVlbidzIHdvcnRoIG9mIHNjcm9sbGluZ1xuICBpZiAoIV8uaXNOaWwoZGlzdGFuY2UpKSB7XG4gICAgcGFyYW1zLmRpc3RhbmNlID0gZGlzdGFuY2U7XG4gIH1cbiAgY29uc3QgZWxlbWVudElkID0gYXdhaXQgdG9FbGVtZW50T3JBcHBsaWNhdGlvbklkKHRoaXMsIG9wdHMpO1xuICByZXR1cm4gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoYC93ZGEvZWxlbWVudC8ke2VsZW1lbnRJZH0vc2Nyb2xsYCwgJ1BPU1QnLCBwYXJhbXMpO1xufTtcblxuaGVscGVycy5tb2JpbGVTd2lwZSA9IGFzeW5jIGZ1bmN0aW9uIG1vYmlsZVN3aXBlIChvcHRzID0ge30pIHtcbiAgY29uc3Qge1xuICAgIGRpcmVjdGlvbixcbiAgICB2ZWxvY2l0eSxcbiAgfSA9IG9wdHM7XG4gIGlmICghU1VQUE9SVEVEX0dFU1RVUkVfRElSRUNUSU9OUy5pbmNsdWRlcyhfLnRvTG93ZXIoZGlyZWN0aW9uKSkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLkludmFsaWRBcmd1bWVudEVycm9yKGAnZGlyZWN0aW9uJyBtdXN0IGJlIG9uZSBvZjogJHtTVVBQT1JURURfR0VTVFVSRV9ESVJFQ1RJT05TfWApO1xuICB9XG4gIGNvbnN0IHBhcmFtcyA9IHtkaXJlY3Rpb259O1xuICBpZiAoIV8uaXNOaWwodmVsb2NpdHkpKSB7XG4gICAgcGFyYW1zLnZlbG9jaXR5ID0gdmVsb2NpdHk7XG4gIH1cbiAgY29uc3QgZWxlbWVudElkID0gYXdhaXQgdG9FbGVtZW50T3JBcHBsaWNhdGlvbklkKHRoaXMsIG9wdHMpO1xuICByZXR1cm4gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoYC93ZGEvZWxlbWVudC8ke2VsZW1lbnRJZH0vc3dpcGVgLCAnUE9TVCcsIHBhcmFtcyk7XG59O1xuXG5oZWxwZXJzLm1vYmlsZVBpbmNoID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlUGluY2ggKG9wdHMgPSB7fSkge1xuICBjb25zdCBwYXJhbXMgPSB7XG4gICAgc2NhbGU6IHJlcXVpcmVGbG9hdFBhcmFtZXRlcignc2NhbGUnLCBvcHRzLnNjYWxlLCAncGluY2gnKSxcbiAgICB2ZWxvY2l0eTogcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCd2ZWxvY2l0eScsIG9wdHMudmVsb2NpdHksICdwaW5jaCcpXG4gIH07XG4gIGNvbnN0IGVsZW1lbnRJZCA9IGF3YWl0IHRvRWxlbWVudE9yQXBwbGljYXRpb25JZCh0aGlzLCBvcHRzKTtcbiAgcmV0dXJuIGF3YWl0IHRoaXMucHJveHlDb21tYW5kKGAvd2RhL2VsZW1lbnQvJHtlbGVtZW50SWR9L3BpbmNoYCwgJ1BPU1QnLCBwYXJhbXMpO1xufTtcblxuaGVscGVycy5tb2JpbGVEb3VibGVUYXAgPSBhc3luYyBmdW5jdGlvbiBtb2JpbGVEb3VibGVUYXAgKG9wdHMgPSB7fSkge1xuICBjb25zdCBlbGVtZW50SWQgPSB0b0VsZW1lbnRJZChvcHRzKTtcbiAgaWYgKGVsZW1lbnRJZCkge1xuICAgIC8vIERvdWJsZSB0YXAgZWxlbWVudFxuICAgIHJldHVybiBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZChgL3dkYS9lbGVtZW50LyR7ZWxlbWVudElkfS9kb3VibGVUYXBgLCAnUE9TVCcpO1xuICB9XG4gIC8vIERvdWJsZSB0YXAgY29vcmRpbmF0ZXNcbiAgY29uc3QgcGFyYW1zID0ge1xuICAgIHg6IHJlcXVpcmVGbG9hdFBhcmFtZXRlcigneCcsIG9wdHMueCwgJ2RvdWJsZVRhcCcpLFxuICAgIHk6IHJlcXVpcmVGbG9hdFBhcmFtZXRlcigneScsIG9wdHMueSwgJ2RvdWJsZVRhcCcpXG4gIH07XG4gIHJldHVybiBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZCgnL3dkYS9kb3VibGVUYXAnLCAnUE9TVCcsIHBhcmFtcyk7XG59O1xuXG5oZWxwZXJzLm1vYmlsZVR3b0ZpbmdlclRhcCA9IGFzeW5jIGZ1bmN0aW9uIG1vYmlsZVR3b0ZpbmdlclRhcCAob3B0cyA9IHt9KSB7XG4gIGNvbnN0IGVsZW1lbnRJZCA9IGF3YWl0IHRvRWxlbWVudE9yQXBwbGljYXRpb25JZCh0aGlzLCBvcHRzKTtcbiAgcmV0dXJuIGF3YWl0IHRoaXMucHJveHlDb21tYW5kKGAvd2RhL2VsZW1lbnQvJHtlbGVtZW50SWR9L3R3b0ZpbmdlclRhcGAsICdQT1NUJyk7XG59O1xuXG5oZWxwZXJzLm1vYmlsZVRvdWNoQW5kSG9sZCA9IGFzeW5jIGZ1bmN0aW9uIG1vYmlsZVRvdWNoQW5kSG9sZCAob3B0cyA9IHt9KSB7XG4gIGNvbnN0IHBhcmFtcyA9IHtcbiAgICBkdXJhdGlvbjogcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCdkdXJhdGlvbicsIG9wdHMuZHVyYXRpb24sICd0b3VjaEFuZEhvbGQnKVxuICB9O1xuICBjb25zdCBlbGVtZW50SWQgPSB0b0VsZW1lbnRJZChvcHRzKTtcbiAgaWYgKGVsZW1lbnRJZCkge1xuICAgIC8vIExvbmcgdGFwIGVsZW1lbnRcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoYC93ZGEvZWxlbWVudC8ke2VsZW1lbnRJZH0vdG91Y2hBbmRIb2xkYCwgJ1BPU1QnLCBwYXJhbXMpO1xuICB9XG4gIC8vIExvbmcgdGFwIGNvb3JkaW5hdGVzXG4gIHBhcmFtcy54ID0gcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCd4Jywgb3B0cy54LCAndG91Y2hBbmRIb2xkJyk7XG4gIHBhcmFtcy55ID0gcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCd5Jywgb3B0cy55LCAndG91Y2hBbmRIb2xkJyk7XG4gIHJldHVybiBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZCgnL3dkYS90b3VjaEFuZEhvbGQnLCAnUE9TVCcsIHBhcmFtcyk7XG59O1xuXG5oZWxwZXJzLm1vYmlsZVRhcCA9IGFzeW5jIGZ1bmN0aW9uIG1vYmlsZVRhcCAob3B0cyA9IHt9KSB7XG4gIGNvbnN0IHBhcmFtcyA9IHtcbiAgICB4OiByZXF1aXJlRmxvYXRQYXJhbWV0ZXIoJ3gnLCBvcHRzLngsICd0YXAnKSxcbiAgICB5OiByZXF1aXJlRmxvYXRQYXJhbWV0ZXIoJ3knLCBvcHRzLnksICd0YXAnKVxuICB9O1xuICBjb25zdCBlbGVtZW50SWQgPSB0b0VsZW1lbnRJZChvcHRzKSB8fCAnMCc7XG4gIHJldHVybiBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZChgL3dkYS90YXAvJHtlbGVtZW50SWR9YCwgJ1BPU1QnLCBwYXJhbXMpO1xufTtcblxuaGVscGVycy5tb2JpbGVEcmFnRnJvbVRvRm9yRHVyYXRpb24gPSBhc3luYyBmdW5jdGlvbiBtb2JpbGVEcmFnRnJvbVRvRm9yRHVyYXRpb24gKG9wdHMgPSB7fSkge1xuICBjb25zdCBwYXJhbXMgPSB7XG4gICAgZHVyYXRpb246IHJlcXVpcmVGbG9hdFBhcmFtZXRlcignZHVyYXRpb24nLCBvcHRzLmR1cmF0aW9uLCAnZHJhZ0Zyb21Ub0ZvckR1cmF0aW9uJyksXG4gICAgZnJvbVg6IHJlcXVpcmVGbG9hdFBhcmFtZXRlcignZnJvbVgnLCBvcHRzLmZyb21YLCAnZHJhZ0Zyb21Ub0ZvckR1cmF0aW9uJyksXG4gICAgZnJvbVk6IHJlcXVpcmVGbG9hdFBhcmFtZXRlcignZnJvbVknLCBvcHRzLmZyb21ZLCAnZHJhZ0Zyb21Ub0ZvckR1cmF0aW9uJyksXG4gICAgdG9YOiByZXF1aXJlRmxvYXRQYXJhbWV0ZXIoJ3RvWCcsIG9wdHMudG9YLCAnZHJhZ0Zyb21Ub0ZvckR1cmF0aW9uJyksXG4gICAgdG9ZOiByZXF1aXJlRmxvYXRQYXJhbWV0ZXIoJ3RvWScsIG9wdHMudG9ZLCAnZHJhZ0Zyb21Ub0ZvckR1cmF0aW9uJylcbiAgfTtcbiAgY29uc3QgZWxlbWVudElkID0gdG9FbGVtZW50SWQob3B0cyk7XG4gIHJldHVybiBlbGVtZW50SWRcbiAgICAvLyBEcmFnIGVsZW1lbnRcbiAgICA/IGF3YWl0IHRoaXMucHJveHlDb21tYW5kKGAvd2RhL2VsZW1lbnQvJHtlbGVtZW50SWR9L2RyYWdmcm9tdG9mb3JkdXJhdGlvbmAsICdQT1NUJywgcGFyYW1zKVxuICAgIC8vIERyYWcgY29vcmRpbmF0ZXNcbiAgICA6IGF3YWl0IHRoaXMucHJveHlDb21tYW5kKCcvd2RhL2RyYWdmcm9tdG9mb3JkdXJhdGlvbicsICdQT1NUJywgcGFyYW1zKTtcbn07XG5cbmhlbHBlcnMubW9iaWxlRHJhZ0Zyb21Ub1dpdGhWZWxvY2l0eSA9IGFzeW5jIGZ1bmN0aW9uIG1vYmlsZURyYWdGcm9tVG9XaXRoVmVsb2NpdHkgKG9wdHMgPSB7fSkge1xuICBjb25zdCBwYXJhbXMgPSB7XG4gICAgcHJlc3NEdXJhdGlvbjogcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCdwcmVzc0R1cmF0aW9uJywgb3B0cy5wcmVzc0R1cmF0aW9uLCAnZHJhZ0Zyb21Ub1dpdGhWZWxvY2l0eScpLFxuICAgIGhvbGREdXJhdGlvbjogcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCdob2xkRHVyYXRpb24nLCBvcHRzLmhvbGREdXJhdGlvbiwgJ2RyYWdGcm9tVG9XaXRoVmVsb2NpdHknKSxcbiAgICB2ZWxvY2l0eTogcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCd2ZWxvY2l0eScsIG9wdHMudmVsb2NpdHksICdkcmFnRnJvbVRvV2l0aFZlbG9jaXR5JyksXG4gIH07XG4gIGNvbnN0IGZyb21FbGVtZW50SWQgPSBvcHRzLmZyb21FbGVtZW50SWQgPyB1dGlsLnVud3JhcEVsZW1lbnQob3B0cy5mcm9tRWxlbWVudElkKSA6IG51bGw7XG4gIGlmIChmcm9tRWxlbWVudElkKSB7XG4gICAgY29uc3QgdG9FbGVtZW50ID0gb3B0cy50b0VsZW1lbnRJZCA/IHV0aWwudW53cmFwRWxlbWVudChvcHRzLnRvRWxlbWVudElkKSA6IG51bGw7XG4gICAgaWYgKCF0b0VsZW1lbnQpIHtcbiAgICAgIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZEFyZ3VtZW50RXJyb3IoYFwidG9FbGVtZW50SWRcIiBwYXJhbWV0ZXIgaXMgbWFuZGF0b3J5IGZvciBcImRyYWdGcm9tVG9XaXRoVmVsb2NpdHlcIiBjYWxsYCk7XG4gICAgfVxuICAgIHBhcmFtcy50b0VsZW1lbnQgPSB0b0VsZW1lbnQ7XG4gICAgcmV0dXJuIGF3YWl0IHRoaXMucHJveHlDb21tYW5kKGAvd2RhL2VsZW1lbnQvJHtmcm9tRWxlbWVudElkfS9wcmVzc0FuZERyYWdXaXRoVmVsb2NpdHlgLCAnUE9TVCcsIHBhcmFtcyk7XG4gIH1cbiAgcGFyYW1zLmZyb21YID0gcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCdmcm9tWCcsIG9wdHMuZnJvbVgsICdkcmFnRnJvbVRvV2l0aFZlbG9jaXR5Jyk7XG4gIHBhcmFtcy5mcm9tWSA9IHJlcXVpcmVGbG9hdFBhcmFtZXRlcignZnJvbVknLCBvcHRzLmZyb21ZLCAnZHJhZ0Zyb21Ub1dpdGhWZWxvY2l0eScpO1xuICBwYXJhbXMudG9YID0gcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCd0b1gnLCBvcHRzLnRvWCwgJ2RyYWdGcm9tVG9XaXRoVmVsb2NpdHknKTtcbiAgcGFyYW1zLnRvWSA9IHJlcXVpcmVGbG9hdFBhcmFtZXRlcigndG9ZJywgb3B0cy50b1ksICdkcmFnRnJvbVRvV2l0aFZlbG9jaXR5Jyk7XG4gIHJldHVybiBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZCgnL3dkYS9wcmVzc0FuZERyYWdXaXRoVmVsb2NpdHknLCAnUE9TVCcsIHBhcmFtcyk7XG59O1xuXG5oZWxwZXJzLm1vYmlsZVRhcFdpdGhOdW1iZXJPZlRhcHMgPSBhc3luYyBmdW5jdGlvbiBtb2JpbGVUYXBXaXRoTnVtYmVyT2ZUYXBzIChvcHRzID0ge30pIHtcbiAgY29uc3QgZWxlbWVudElkID0gdG9FbGVtZW50SWQob3B0cyk7XG4gIGlmICghZWxlbWVudElkKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5JbnZhbGlkQXJndW1lbnRFcnJvcignRWxlbWVudCBpZCBpcyBleHBlY3RlZCB0byBiZSBzZXQgZm9yIHRhcFdpdGhOdW1iZXJPZlRhcHMgbWV0aG9kJyk7XG4gIH1cbiAgY29uc3QgcGFyYW1zID0ge1xuICAgIG51bWJlck9mVGFwczogcmVxdWlyZUludFBhcmFtZXRlcignbnVtYmVyT2ZUYXBzJywgb3B0cy5udW1iZXJPZlRhcHMsICd0YXBXaXRoTnVtYmVyT2ZUYXBzJyksXG4gICAgbnVtYmVyT2ZUb3VjaGVzOiByZXF1aXJlSW50UGFyYW1ldGVyKCdudW1iZXJPZlRvdWNoZXMnLCBvcHRzLm51bWJlck9mVG91Y2hlcywgJ3RhcFdpdGhOdW1iZXJPZlRhcHMnKSxcbiAgfTtcbiAgcmV0dXJuIGF3YWl0IHRoaXMucHJveHlDb21tYW5kKGAvd2RhL2VsZW1lbnQvJHtlbGVtZW50SWR9L3RhcFdpdGhOdW1iZXJPZlRhcHNgLCAnUE9TVCcsIHBhcmFtcyk7XG59O1xuXG5oZWxwZXJzLm1vYmlsZUZvcmNlUHJlc3MgPSBhc3luYyBmdW5jdGlvbiBtb2JpbGVGb3JjZVByZXNzIChvcHRzID0ge30pIHtcbiAgY29uc3Qge3gsIHksIGR1cmF0aW9uLCBwcmVzc3VyZX0gPSBvcHRzO1xuICBjb25zdCBlbGVtZW50SWQgPSB0b0VsZW1lbnRJZChvcHRzKTtcbiAgY29uc3QgZW5kcG9pbnQgPSBlbGVtZW50SWQgPyBgL3dkYS9lbGVtZW50LyR7ZWxlbWVudElkfS9mb3JjZVRvdWNoYCA6IGAvd2RhL2ZvcmNlVG91Y2hgO1xuICByZXR1cm4gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoZW5kcG9pbnQsICdQT1NUJywge3gsIHksIGR1cmF0aW9uLCBwcmVzc3VyZX0pO1xufTtcblxuaGVscGVycy5tb2JpbGVTZWxlY3RQaWNrZXJXaGVlbFZhbHVlID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlU2VsZWN0UGlja2VyV2hlZWxWYWx1ZSAob3B0cyA9IHt9KSB7XG4gIGNvbnN0IGVsZW1lbnRJZCA9IHRvRWxlbWVudElkKG9wdHMpO1xuICBpZiAoIWVsZW1lbnRJZCkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0VsZW1lbnQgaWQgaXMgZXhwZWN0ZWQgdG8gYmUgc2V0IGZvciBzZWxlY3RQaWNrZXJXaGVlbFZhbHVlIG1ldGhvZCcpO1xuICB9XG4gIGlmICghXy5pc1N0cmluZyhvcHRzLm9yZGVyKSB8fCAhWyduZXh0JywgJ3ByZXZpb3VzJ10uaW5jbHVkZXMob3B0cy5vcmRlci50b0xvd2VyQ2FzZSgpKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZEFyZ3VtZW50RXJyb3IoYFRoZSBtYW5kYXRvcnkgJ29yZGVyJyBwYXJhbWV0ZXIgaXMgZXhwZWN0ZWQgdG8gYmUgZXF1YWwgZWl0aGVyIHRvICduZXh0JyBvciAncHJldmlvdXMnLiBgICtcbiAgICAgIGAnJHtvcHRzLm9yZGVyfScgaXMgZ2l2ZW4gaW5zdGVhZGApO1xuICB9XG4gIGNvbnN0IHBhcmFtcyA9IHtvcmRlcjogb3B0cy5vcmRlcn07XG4gIGlmIChvcHRzLm9mZnNldCkge1xuICAgIHBhcmFtcy5vZmZzZXQgPSByZXF1aXJlRmxvYXRQYXJhbWV0ZXIoJ29mZnNldCcsIG9wdHMub2Zmc2V0LCAnc2VsZWN0UGlja2VyV2hlZWxWYWx1ZScpO1xuICB9XG4gIHJldHVybiBhd2FpdCB0aGlzLnByb3h5Q29tbWFuZChgL3dkYS9waWNrZXJ3aGVlbC8ke2VsZW1lbnRJZH0vc2VsZWN0YCwgJ1BPU1QnLCBwYXJhbXMpO1xufTtcblxuaGVscGVycy5tb2JpbGVSb3RhdGVFbGVtZW50ID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlUm90YXRlRWxlbWVudCAob3B0cyA9IHt9KSB7XG4gIGNvbnN0IGVsZW1lbnRJZCA9IHRvRWxlbWVudElkKG9wdHMpO1xuICBpZiAoIWVsZW1lbnRJZCkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuSW52YWxpZEFyZ3VtZW50RXJyb3IoJ0VsZW1lbnQgaWQgaXMgZXhwZWN0ZWQgdG8gYmUgc2V0IGZvciByb3RhdGVFbGVtZW50IG1ldGhvZCcpO1xuICB9XG4gIGNvbnN0IHBhcmFtcyA9IHtcbiAgICByb3RhdGlvbjogcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCdyb3RhdGlvbicsIG9wdHMucm90YXRpb24sICdyb3RhdGVFbGVtZW50JyksXG4gICAgdmVsb2NpdHk6IHJlcXVpcmVGbG9hdFBhcmFtZXRlcigndmVsb2NpdHknLCBvcHRzLnZlbG9jaXR5LCAncm90YXRlRWxlbWVudCcpLFxuICB9O1xuICByZXR1cm4gYXdhaXQgdGhpcy5wcm94eUNvbW1hbmQoYC93ZGEvZWxlbWVudC8ke2VsZW1lbnRJZH0vcm90YXRlYCwgJ1BPU1QnLCBwYXJhbXMpO1xufTtcblxuaGVscGVycy5nZXRDb29yZGluYXRlcyA9IGFzeW5jIGZ1bmN0aW9uIGdldENvb3JkaW5hdGVzIChnZXN0dXJlKSB7XG4gIC8vIGRlZmF1bHRzXG4gIGxldCBjb29yZGluYXRlcyA9IHt4OiAwLCB5OiAwLCBhcmVPZmZzZXRzOiBmYWxzZX07XG5cbiAgbGV0IG9wdGlvblggPSBudWxsO1xuICBpZiAoZ2VzdHVyZS5vcHRpb25zLngpIHtcbiAgICBvcHRpb25YID0gcmVxdWlyZUZsb2F0UGFyYW1ldGVyKCd4JywgZ2VzdHVyZS5vcHRpb25zLngsICdnZXRDb29yZGluYXRlcycpO1xuICB9XG4gIGxldCBvcHRpb25ZID0gbnVsbDtcbiAgaWYgKGdlc3R1cmUub3B0aW9ucy55KSB7XG4gICAgb3B0aW9uWSA9IHJlcXVpcmVGbG9hdFBhcmFtZXRlcigneScsIGdlc3R1cmUub3B0aW9ucy55LCAnZ2V0Q29vcmRpbmF0ZXMnKTtcbiAgfVxuXG4gIC8vIGZpZ3VyZSBvdXQgdGhlIGVsZW1lbnQgY29vcmRpbmF0ZXMuXG4gIGNvbnN0IGVsZW1lbnRJZCA9IHRvRWxlbWVudElkKGdlc3R1cmUub3B0aW9ucyk7XG4gIGlmIChlbGVtZW50SWQpIHtcbiAgICBsZXQgcmVjdCA9IGF3YWl0IHRoaXMuZ2V0RWxlbWVudFJlY3QoZWxlbWVudElkKTtcbiAgICBsZXQgcG9zID0ge3g6IHJlY3QueCwgeTogcmVjdC55fTtcbiAgICBsZXQgc2l6ZSA9IHt3OiByZWN0LndpZHRoLCBoOiByZWN0LmhlaWdodH07XG5cbiAgICAvLyBkZWZhdWx0c1xuICAgIGxldCBvZmZzZXRYID0gMDtcbiAgICBsZXQgb2Zmc2V0WSA9IDA7XG5cbiAgICAvLyBnZXQgdGhlIHJlYWwgb2Zmc2V0c1xuICAgIGlmIChvcHRpb25YIHx8IG9wdGlvblkpIHtcbiAgICAgIG9mZnNldFggPSAob3B0aW9uWCB8fCAwKTtcbiAgICAgIG9mZnNldFkgPSAob3B0aW9uWSB8fCAwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb2Zmc2V0WCA9IChzaXplLncgLyAyKTtcbiAgICAgIG9mZnNldFkgPSAoc2l6ZS5oIC8gMik7XG4gICAgfVxuXG4gICAgLy8gYXBwbHkgdGhlIG9mZnNldHNcbiAgICBjb29yZGluYXRlcy54ID0gcG9zLnggKyBvZmZzZXRYO1xuICAgIGNvb3JkaW5hdGVzLnkgPSBwb3MueSArIG9mZnNldFk7XG4gIH0gZWxzZSB7XG4gICAgLy8gbW92ZVRvIGNvb3JkaW5hdGVzIGFyZSBwYXNzZWQgaW4gYXMgb2Zmc2V0c1xuICAgIGNvb3JkaW5hdGVzLmFyZU9mZnNldHMgPSAoZ2VzdHVyZS5hY3Rpb24gPT09ICdtb3ZlVG8nKTtcbiAgICBjb29yZGluYXRlcy54ID0gKG9wdGlvblggfHwgMCk7XG4gICAgY29vcmRpbmF0ZXMueSA9IChvcHRpb25ZIHx8IDApO1xuICB9XG4gIHJldHVybiBjb29yZGluYXRlcztcbn07XG5cbmhlbHBlcnMuYXBwbHlNb3ZlVG9PZmZzZXQgPSBmdW5jdGlvbiBhcHBseU1vdmVUb09mZnNldCAoZmlyc3RDb29yZGluYXRlcywgc2Vjb25kQ29vcmRpbmF0ZXMpIHtcbiAgaWYgKHNlY29uZENvb3JkaW5hdGVzLmFyZU9mZnNldHMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgeDogZmlyc3RDb29yZGluYXRlcy54ICsgc2Vjb25kQ29vcmRpbmF0ZXMueCxcbiAgICAgIHk6IGZpcnN0Q29vcmRpbmF0ZXMueSArIHNlY29uZENvb3JkaW5hdGVzLnksXG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gc2Vjb25kQ29vcmRpbmF0ZXM7XG4gIH1cbn07XG5cbk9iamVjdC5hc3NpZ24oZXh0ZW5zaW9ucywgaGVscGVycywgY29tbWFuZHMpO1xuZXhwb3J0IHsgZXh0ZW5zaW9ucywgaGVscGVycywgY29tbWFuZHMsIGdlc3R1cmVzQ2hhaW5Ub1N0cmluZyB9O1xuZXhwb3J0IGRlZmF1bHQgZXh0ZW5zaW9ucztcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUVBLE1BQU1BLDRCQUE0QixHQUFHLENBQUMsSUFBRCxFQUFPLE1BQVAsRUFBZSxNQUFmLEVBQXVCLE9BQXZCLENBQXJDO0FBRUEsTUFBTUMsT0FBTyxHQUFHLEVBQWhCO0FBQUEsTUFBb0JDLFVBQVUsR0FBRyxFQUFqQztBQUFBLE1BQXFDQyxRQUFRLEdBQUcsRUFBaEQ7Ozs7O0FBRUEsU0FBU0MsV0FBVCxDQUFzQkMsSUFBSSxHQUFHLEVBQTdCLEVBQWlDO0VBQy9CLElBQUlBLElBQUksQ0FBQ0MsT0FBVCxFQUFrQjtJ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