"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

require("source-map-support/register");

var _asyncbox = require("asyncbox");

var _support = require("appium/support");

var _lodash = _interopRequireDefault(require("lodash"));

var _bluebird = _interopRequireDefault(require("bluebird"));

var _driver = require("appium/driver");

var _cookies = _interopRequireDefault(require("../cookies"));

var _events = require("events");

const IPHONE_TOP_BAR_HEIGHT = 71;
const IPHONE_SCROLLED_TOP_BAR_HEIGHT = 41;
const IPHONE_X_SCROLLED_OFFSET = 55;
const IPHONE_X_NOTCH_OFFSET_IOS = 24;
const IPHONE_X_NOTCH_OFFSET_IOS_13 = 20;
const IPHONE_LANDSCAPE_TOP_BAR_HEIGHT = 51;
const IPHONE_BOTTOM_BAR_OFFSET = 49;
const TAB_BAR_OFFSET = 33;
const IPHONE_WEB_COORD_SMART_APP_BANNER_OFFSET = 84;
const IPAD_WEB_COORD_SMART_APP_BANNER_OFFSET = 95;
const NOTCHED_DEVICE_SIZES = [{
  w: 1125,
  h: 2436
}, {
  w: 828,
  h: 1792
}, {
  w: 1242,
  h: 2688
}];
const {
  W3C_WEB_ELEMENT_IDENTIFIER
} = _support.util;
const ATOM_WAIT_TIMEOUT_MS = 2 * 60000;
const ATOM_INITIAL_WAIT_MS = 1000;
const ON_OBSTRUCTING_ALERT_EVENT = 'alert';
const VISIBLE = 'visible';
const INVISIBLE = 'invisible';
const DETECT = 'detect';
const VISIBILITIES = [VISIBLE, INVISIBLE, DETECT];
const TAB_BAR_POSITION_TOP = 'top';
const TAB_BAR_POSITION_BOTTOM = 'bottom';
const TAB_BAR_POSSITIONS = [TAB_BAR_POSITION_TOP, TAB_BAR_POSITION_BOTTOM];
const commands = {},
      helpers = {},
      extensions = {};

function isValidElementIdentifier(id) {
  if (!_lodash.default.isString(id) && !_lodash.default.isNumber(id)) {
    return false;
  }

  if (_lodash.default.isString(id) && _lodash.default.isEmpty(id)) {
    return false;
  }

  if (_lodash.default.isNumber(id) && isNaN(id)) {
    return false;
  }

  return true;
}

commands.setFrame = async function setFrame(frame) {
  if (!this.isWebContext()) {
    throw new _driver.errors.NotImplementedError();
  }

  if (_lodash.default.isNull(frame)) {
    this.curWebFrames = [];
    this.log.debug('Leaving web frame and going back to default content');
    return;
  }

  if (helpers.hasElementId(frame)) {
    const atomsElement = this.getAtomsElement(frame);
    const value = await this.executeAtom('get_frame_window', [atomsElement]);
    this.log.debug(`Entering new web frame: '${value.WINDOW}'`);
    this.curWebFrames.unshift(value.WINDOW);
  } else {
    const atom = _lodash.default.isNumber(frame) ? 'frame_by_index' : 'frame_by_id_or_name';
    const value = await this.executeAtom(atom, [frame]);

    if (_lodash.default.isNull(value) || _lodash.default.isUndefined(value.WINDOW)) {
      throw new _driver.errors.NoSuchFrameError();
    }

    this.log.debug(`Entering new web frame: '${value.WINDOW}'`);
    this.curWebFrames.unshift(value.WINDOW);
  }
};

commands.getCssProperty = async function getCssProperty(propertyName, el) {
  if (!this.isWebContext()) {
    throw new _driver.errors.NotImplementedError();
  }

  const atomsElement = this.getAtomsElement(el);
  return await this.executeAtom('get_value_of_css_property', [atomsElement, propertyName]);
};

commands.submit = async function submit(el) {
  if (!this.isWebContext()) {
    throw new _driver.errors.NotImplementedError();
  }

  const atomsElement = this.getAtomsElement(el);
  await this.executeAtom('submit', [atomsElement]);
};

commands.refresh = async function refresh() {
  if (!this.isWebContext()) {
    throw new _driver.errors.NotImplementedError();
  }

  await this.executeAtom('refresh', []);
};

commands.getUrl = async function getUrl() {
  if (!this.isWebContext()) {
    throw new _driver.errors.NotImplementedError();
  }

  return await this.remote.execute('window.location.href');
};

commands.title = async function title() {
  if (!this.isWebContext()) {
    throw new _driver.errors.NotImplementedError();
  }

  return await this.executeAtom('title', [], true);
};

commands.getCookies = async function getCookies() {
  if (!this.isWebContext()) {
    throw new _driver.errors.NotImplementedError();
  }

  this.log.debug('Retrieving all cookies');
  let script = 'return document.cookie';
  let jsCookies = await this.executeAtom('execute_script', [script, []]);
  let cookies = [];

  try {
    for (let [name, value] of _lodash.default.toPairs(_cookies.default.createJWPCookie(undefined, jsCookies))) {
      cookies.push({
        name,
        value
      });
    }

    return cookies;
  } catch (err) {
    this.log.error(err);
    throw new _driver.errors.UnknownError(`Error parsing cookies from result: '${jsCookies}'`);
  }
};

commands.setCookie = async function setCookie(cookie) {
  if (!this.isWebContext()) {
    throw new _driver.errors.NotImplementedError();
  }

  cookie = _lodash.default.clone(cookie);

  if (!cookie.path) {
    cookie.path = '/';
  }

  const jsCookie = _cookies.default.createJSCookie(cookie.name, cookie.value, {
    expires: _lodash.default.isNumber(cookie.expiry) ? new Date(cookie.expiry * 1000).toUTCString() : cookie.expiry,
    path: cookie.path,
    domain: cookie.domain,
    httpOnly: cookie.httpOnly,
    secure: cookie.secure
  });

  let script = `document.cookie = ${JSON.stringify(jsCookie)}`;
  await this.executeAtom('execute_script', [script, []]);
};

commands.deleteCookie = async function deleteCookie(cookieName) {
  if (!this.isWebContext()) {
    throw new _driver.errors.NotImplementedError();
  }

  let cookies = await this.getCookies();

  if (_lodash.default.indexOf(_lodash.default.map(cookies, 'name'), cookieName) === -1) {
    this.log.debug(`Cookie '${cookieName}' not found. Ignoring.`);
    return true;
  }

  return await this._deleteCookie(cookieName);
};

commands.deleteCookies = async function deleteCookies() {
  if (!this.isWebContext()) {
    throw new _driver.errors.NotImplementedError();
  }

  let cookies = await this.getCookies();

  if (cookies.length) {
    for (let cookie of cookies) {
      await this._deleteCookie(cookie.name);
    }
  }

  return true;
};

helpers._deleteCookie = async function _deleteCookie(cookieName) {
  this.log.debug(`Deleting cookie '${cookieName}'`);

  let webCookie = _cookies.default.expireCookie(cookieName, {
    path: '/'
  });

  let script = `document.cookie = ${JSON.stringify(webCookie)}`;
  await this.executeAtom('execute_script', [script, []]);
};

helpers.cacheWebElement = function cacheWebElement(el) {
  if (!_lodash.default.isPlainObject(el)) {
    return el;
  }

  const elId = _support.util.unwrapElement(el);

  if (!isValidElementIdentifier(elId)) {
    return el;
  }

  const cacheId = _lodash.default.includes(elId, ':') ? elId : _support.util.uuidV4();
  this.webElementsCache.set(cacheId, elId);
  return _support.util.wrapElement(cacheId);
};

helpers.cacheWebElements = function cacheWebElements(response) {
  const toCached = v => _lodash.default.isArray(v) || _lodash.default.isPlainObject(v) ? this.cacheWebElements(v) : v;

  if (_lodash.default.isArray(response)) {
    return response.map(toCached);
  } else if (_lodash.default.isPlainObject(response)) {
    const result = { ...response,
      ...this.cacheWebElement(response)
    };
    return _lodash.default.toPairs(result).reduce((acc, [key, value]) => {
      acc[key] = toCached(value);
      return acc;
    }, {});
  }

  return response;
};

extensions.findWebElementOrElements = async function findWebElementOrElements(strategy, selector, many, ctx) {
  const contextElement = _lodash.default.isNil(ctx) ? null : this.getAtomsElement(ctx);
  let element;

  let doFind = async () => {
    element = await this.executeAtom(`find_element${many ? 's' : ''}`, [strategy, selector, contextElement]);
    return !_lodash.default.isNull(element);
  };

  try {
    await this.implicitWaitForCondition(doFind);
  } catch (err) {
    if (err.message && _lodash.default.isFunction(err.message.match) && err.message.match(/Condition unmet/)) {
      element = [];
    } else {
      throw err;
    }
  }

  if (many) {
    return this.cacheWebElements(element);
  }

  if (_lodash.default.isEmpty(element)) {
    throw new _driver.errors.NoSuchElementError();
  }

  return this.cacheWebElements(element);
};

extensions.clickWebCoords = async function clickWebCoords() {
  let coords = await this.translateWebCoords(this.curWebCoords);
  await this.clickCoords(coords);
};

helpers.executeAtom = async function executeAtom(atom, args, alwaysDefaultFrame = false) {
  let frames = alwaysDefaultFrame === true ? [] : this.curWebFrames;
  let promise = this.remote.executeAtom(atom, args, frames);
  return await this.waitForAtom(promise);
};

helpers.executeAtomAsync = async function executeAtomAsync(atom, args, responseUrl) {
  let promise = new _bluebird.default((resolve, reject) => {
    this.asyncPromise = {
      resolve,
      reject
    };
  });
  await this.remote.executeAtomAsync(atom, args, this.curWebFrames, responseUrl);
  return await this.waitForAtom(promise);
};

helpers.getAtomsElement = function getAtomsElement(elOrId) {
  const elId = _support.util.unwrapElement(elOrId);

  if (!this.webElementsCache.has(elId)) {
    throw new _driver.errors.StaleElementReferenceError();
  }

  return {
    ELEMENT: this.webElementsCache.get(elId)
  };
};

helpers.convertElementsForAtoms = function convertElementsForAtoms(args = []) {
  return args.map(arg => {
    if (helpers.hasElementId(arg)) {
      try {
        return this.getAtomsElement(arg);
      } catch (err) {
        if (!(0, _driver.isErrorType)(err, _driver.errors.StaleElementReferenceError)) {
          throw err;
        }
      }

      return arg;
    }

    return _lodash.default.isArray(arg) ? this.convertElementsForAtoms(arg) : arg;
  });
};

helpers.getElementId = function getElementId(element) {
  return element.ELEMENT || element[W3C_WEB_ELEMENT_IDENTIFIER];
};

helpers.hasElementId = function hasElementId(element) {
  return _support.util.hasValue(element) && (_support.util.hasValue(element.ELEMENT) || _support.util.hasValue(element[W3C_WEB_ELEMENT_IDENTIFIER]));
};

extensions.getSafariIsIphone = async function getSafariIsIphone() {
  if (_lodash.default.isBoolean(this._isSafariIphone)) {
    return this._isSafariIphone;
  }

  try {
    const userAgent = await this.execute('return navigator.userAgent');
    this._isSafariIphone = userAgent.toLowerCase().includes('iphone');
  } catch (err) {
    this.log.warn(`Unable to find device type from useragent. Assuming iPhone`);
    this.log.debug(`Error: ${err.message}`);
  }

  return this._isSafariIphone ?? true;
};

extensions.getSafariDeviceSize = async function getSafariDeviceSize() {
  const script = 'return {height: window.screen.availHeight * window.devicePixelRatio, width: window.screen.availWidth * window.devicePixelRatio};';
  const {
    width,
    height
  } = await this.execute(script);
  const [normHeight, normWidth] = height > width ? [height, width] : [width, height];
  return {
    width: normWidth,
    height: normHeight
  };
};

extensions.getSafariIsNotched = async function getSafariIsNotched() {
  if (_lodash.default.isBoolean(this._isSafariNotched)) {
    return this._isSafariNotched;
  }

  try {
    const {
      width,
      height
    } = await this.getSafariDeviceSize();

    for (const device of NOTCHED_DEVICE_SIZES) {
      if (device.w === width && device.h === height) {
        this._isSafariNotched = true;
      }
    }
  } catch (err) {
    this.log.warn(`Unable to find device type from dimensions. Assuming the device is not notched`);
    this.log.debug(`Error: ${err.message}`);
  }

  return this._isSafariNotched ?? false;
};

extensions.getExtraTranslateWebCoordsOffset = async function getExtraTranslateWebCoordsOffset(wvPos, realDims) {
  let topOffset = 0;
  let bottomOffset = 0;
  const isIphone = await this.getSafariIsIphone();
  const {
    nativeWebTapTabBarVisibility,
    nativeWebTapSmartAppBannerVisibility,
    safariTabBarPosition = _support.util.compareVersions(this.opts.platformVersion, '>=', '15.0') && isIphone ? TAB_BAR_POSITION_BOTTOM : TAB_BAR_POSITION_TOP
  } = await this.settings.getSettings();

  let tabBarVisibility = _lodash.default.lowerCase(nativeWebTapTabBarVisibility);

  let bannerVisibility = _lodash.default.lowerCase(nativeWebTapSmartAppBannerVisibility);

  const tabBarPosition = _lodash.default.lowerCase(safariTabBarPosition);

  if (!VISIBILITIES.includes(tabBarVisibility)) {
    tabBarVisibility = DETECT;
  }

  if (!VISIBILITIES.includes(bannerVisibility)) {
    bannerVisibility = DETECT;
  }

  if (!TAB_BAR_POSSITIONS.includes(tabBarPosition)) {
    throw new _driver.errors.InvalidArgumentError(`${safariTabBarPosition} is invalid as Safari tab bar position. Available positions are ${TAB_BAR_POSSITIONS}.`);
  }

  const isNotched = isIphone && (await this.getSafariIsNotched());
  const orientation = realDims.h > realDims.w ? 'PORTRAIT' : 'LANDSCAPE';
  const notchOffset = isNotched ? _support.util.compareVersions(this.opts.platformVersion, '=', '13.0') ? IPHONE_X_NOTCH_OFFSET_IOS_13 : IPHONE_X_NOTCH_OFFSET_IOS : 0;
  const isScrolled = await this.execute('return document.documentElement.scrollTop > 0');

  if (isScrolled) {
    topOffset = IPHONE_SCROLLED_TOP_BAR_HEIGHT + notchOffset;

    if (isNotched) {
      topOffset -= IPHONE_X_SCROLLED_OFFSET;
    }

    if (orientation === 'LANDSCAPE' && isIphone) {
      topOffset = 0;
    }
  } else {
    topOffset = tabBarPosition === TAB_BAR_POSITION_BOTTOM ? 0 : IPHONE_TOP_BAR_HEIGHT;
    topOffset += notchOffset;
    this.log.debug(`tabBarPosition and topOffset: ${tabBarPosition}, ${topOffset}`);

    if (isIphone) {
      if (orientation === 'PORTRAIT') {
        bottomOffset = IPHONE_BOTTOM_BAR_OFFSET;
      } else {
        topOffset = IPHONE_LANDSCAPE_TOP_BAR_HEIGHT;
      }
    }

    if (orientation === 'LANDSCAPE' || !isIphone) {
      if (tabBarVisibility === VISIBLE) {
        topOffset += TAB_BAR_OFFSET;
      } else if (tabBarVisibility === DETECT) {
        const contextsAndViews = await this.getContextsAndViews();
        const tabs = contextsAndViews.filter(ctx => ctx.id.startsWith('WEBVIEW_'));

        if (tabs.length > 1) {
          this.log.debug(`Found ${tabs.length} tabs. Assuming the tab bar is visible`);
          topOffset += TAB_BAR_OFFSET;
        }
      }
    }
  }

  topOffset += await this.getExtraNativeWebTapOffset(isIphone, bannerVisibility);
  wvPos.y += topOffset;
  realDims.h -= topOffset + bottomOffset;
};

extensions.getExtraNativeWebTapOffset = async function getExtraNativeWebTapOffset(isIphone, bannerVisibility) {
  let offset = 0;

  if (bannerVisibility === VISIBLE) {
    offset += isIphone ? IPHONE_WEB_COORD_SMART_APP_BANNER_OFFSET : IPAD_WEB_COORD_SMART_APP_BANNER_OFFSET;
  } else if (bannerVisibility === DETECT) {
    const banners = await this.findNativeElementOrElements('accessibility id', 'Close app download offer', true);

    if (banners.length > 0) {
      offset += isIphone ? IPHONE_WEB_COORD_SMART_APP_BANNER_OFFSET : IPAD_WEB_COORD_SMART_APP_BANNER_OFFSET;
    }
  }

  this.log.debug(`Additional native web tap offset computed: ${offset}`);
  return offset;
};

async function tapWebElementNatively(driver, atomsElement) {
  try {
    let text = await driver.executeAtom('get_text', [atomsElement]);

    if (!text) {
      text = await driver.executeAtom('get_attribute_value', [atomsElement, 'value']);
    }

    if (text) {
      const els = await driver.findNativeElementOrElements('accessibility id', text, true);

      if (els.length === 1 || els.length === 2) {
        const el = els[0];
        const rect = await driver.proxyCommand(`/element/${_support.util.unwrapElement(el)}/rect`, 'GET');

        if (els.length === 2) {
          const el2 = els[1];
          const rect2 = await driver.proxyCommand(`/element/${_support.util.unwrapElement(el2)}/rect`, 'GET');

          if (rect.x !== rect2.x || rect.y !== rect2.y || rect.width !== rect2.width || rect.height !== rect2.height) {
            return false;
          }
        }

        const coords = {
          x: Math.round(rect.x + rect.width / 2),
          y: Math.round(rect.y + rect.height / 2)
        };
        await driver.clickCoords(coords);
        return true;
      }
    }
  } catch (err) {
    driver.log.warn(`Error attempting to click: ${err.message}`);
  }

  return false;
}

extensions.nativeWebTap = async function nativeWebTap(el) {
  const atomsElement = this.getAtomsElement(el);

  if (!(await this.settings.getSettings()).nativeWebTapStrict && (await tapWebElementNatively(this, atomsElement))) {
    return;
  }

  this.log.warn('Unable to do simple native web tap. Attempting to convert coordinates');
  await _bluebird.default.Promise.all([this.executeAtom('get_size', [atomsElement]), this.executeAtom('get_top_left_coordinates', [atomsElement])]);
  const [size, coordinates] = await _bluebird.default.Promise.all([this.executeAtom('get_size', [atomsElement]), this.executeAtom('get_top_left_coordinates', [atomsElement])]);
  const {
    width,
    height
  } = size;
  let {
    x,
    y
  } = coordinates;
  x += width / 2;
  y += height / 2;
  this.curWebCoords = {
    x,
    y
  };
  await this.clickWebCoords();
};

extensions.clickCoords = async function clickCoords(coords) {
  await this.performTouch([{
    action: 'tap',
    options: coords
  }]);
};

extensions.translateWebCoords = async function translateWebCoords(coords) {
  this.log.debug(`Translating coordinates (${JSON.stringify(coords)}) to web coordinates`);
  let webview;

  try {
    webview = await (0, _asyncbox.retryInterval)(5, 100, async () => await this.findNativeElementOrElements('class name', 'XCUIElementTypeWebView', false));
  } catch (ign) {}

  if (!webview) {
    throw new Error(`No WebView found. Unable to translate web coordinates for native web tap.`);
  }

  webview = _support.util.unwrapElement(webview);
  const rect = await this.proxyCommand(`/element/${webview}/rect`, 'GET');
  const wvPos = {
    x: rect.x,
    y: rect.y
  };
  const realDims = {
    w: rect.width,
    h: rect.height
  };
  const cmd = '(function () { return {w: window.innerWidth, h: window.innerHeight}; })()';
  const wvDims = await this.remote.execute(cmd);
  const implicitWaitMs = this.implicitWaitMs;
  await this.setImplicitWait(0);

  try {
    await this.getExtraTranslateWebCoordsOffset(wvPos, realDims);
  } finally {
    await this.setImplicitWait(implicitWaitMs);
  }

  if (wvDims && realDims && wvPos) {
    let xRatio = realDims.w / wvDims.w;
    let yRatio = realDims.h / wvDims.h;
    let newCoords = {
      x: wvPos.x + Math.round(xRatio * coords.x),
      y: wvPos.y + Math.round(yRatio * coords.y)
    };
    this.log.debug(`Converted coordinates: ${JSON.stringify(newCoords)}`);
    this.log.debug(`    rect: ${JSON.stringify(rect)}`);
    this.log.debug(`    wvPos: ${JSON.stringify(wvPos)}`);
    this.log.debug(`    realDims: ${JSON.stringify(realDims)}`);
    this.log.debug(`    wvDims: ${JSON.stringify(wvDims)}`);
    this.log.debug(`    xRatio: ${JSON.stringify(xRatio)}`);
    this.log.debug(`    yRatio: ${JSON.stringify(yRatio)}`);
    this.log.debug(`Converted web coords ${JSON.stringify(coords)} ` + `into real coords ${JSON.stringify(newCoords)}`);
    return newCoords;
  }
};

extensions.checkForAlert = async function checkForAlert() {
  return _lodash.default.isString(await this.getAlertText());
};

extensions.waitForAtom = async function waitForAtom(promise) {
  const timer = new _support.timing.Timer().start();

  const timedAtomPromise = _bluebird.default.resolve(promise).timeout(ATOM_WAIT_TIMEOUT_MS);

  const handlePromiseError = async p => {
    try {
      return await p;
    } catch (err) {
      const originalError = err instanceof _bluebird.default.AggregateError ? err[0] : err;
      this.log.debug(`Error received while executing atom: ${originalError.message}`);

      if (originalError instanceof _bluebird.default.TimeoutError) {
        throw new Error(`Did not get any response for atom execution after ` + `${timer.getDuration().asMilliSeconds.toFixed(0)}ms`);
      }

      throw originalError;
    }
  };

  await handlePromiseError(_bluebird.default.any([_bluebird.default.delay(ATOM_INITIAL_WAIT_MS), timedAtomPromise]));

  if (timedAtomPromise.isFulfilled()) {
    return await timedAtomPromise;
  }

  if (!_lodash.default.isPlainObject(this._waitingAtoms)) {
    this._waitingAtoms = {
      count: 0,
      alertNotifier: new _events.EventEmitter(),
      alertMonitor: _bluebird.default.resolve()
    };
  }

  this._waitingAtoms.count++;
  let onAlertCallback;

  try {
    if (this._waitingAtoms.alertMonitor.isResolved()) {
      this._waitingAtoms.alertMonitor = _bluebird.default.resolve((async () => {
        while (this._waitingAtoms.count > 0) {
          try {
            if (await this.checkForAlert()) {
              this._waitingAtoms.alertNotifier.emit(ON_OBSTRUCTING_ALERT_EVENT);
            }
          } catch (ign) {}

          await _bluebird.default.delay(ATOM_INITIAL_WAIT_MS / 2);
        }
      })());
    }

    return await new _bluebird.default((resolve, reject) => {
      onAlertCallback = () => reject(new _driver.errors.UnexpectedAlertOpenError());

      this._waitingAtoms.alertNotifier.once(ON_OBSTRUCTING_ALERT_EVENT, onAlertCallback);

      handlePromiseError(timedAtomPromise).then(resolve).catch(reject);
    });
  } finally {
    if (onAlertCallback) {
      this._waitingAtoms.alertNotifier.removeListener(ON_OBSTRUCTING_ALERT_EVENT, onAlertCallback);
    }

    this._waitingAtoms.count--;
  }
};

extensions.mobileWebNav = async function mobileWebNav(navType) {
  this.remote.allowNavigationWithoutReload = true;

  try {
    await this.executeAtom('execute_script', [`history.${navType}();`, null]);
  } finally {
    this.remote.allowNavigationWithoutReload = false;
  }
};

Object.assign(commands, extensions, helpers);
var _default = commands;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJJUEhPTkVfVE9QX0JBUl9IRUlHSFQiLCJJUEhPTkVfU0NST0xMRURfVE9QX0JBUl9IRUlHSFQiLCJJUEhPTkVfWF9TQ1JPTExFRF9PRkZTRVQiLCJJUEhPTkVfWF9OT1RDSF9PRkZTRVRfSU9TIiwiSVBIT05FX1hfTk9UQ0hfT0ZGU0VUX0lPU18xMyIsIklQSE9ORV9MQU5EU0NBUEVfVE9QX0JBUl9IRUlHSFQiLCJJUEhPTkVfQk9UVE9NX0JBUl9PRkZTRVQiLCJUQUJfQkFSX09GRlNFVCIsIklQSE9ORV9XRUJfQ09PUkRfU01BUlRfQVBQX0JBTk5FUl9PRkZTRVQiLCJJUEFEX1dFQl9DT09SRF9TTUFSVF9BUFBfQkFOTkVSX09GRlNFVCIsIk5PVENIRURfREVWSUNFX1NJWkVTIiwidyIsImgiLCJXM0NfV0VCX0VMRU1FTlRfSURFTlRJRklFUiIsInV0aWwiLCJBVE9NX1dBSVRfVElNRU9VVF9NUyIsIkFUT01fSU5JVElBTF9XQUlUX01TIiwiT05fT0JTVFJVQ1RJTkdfQUxFUlRfRVZFTlQiLCJWSVNJQkxFIiwiSU5WSVNJQkxFIiwiREVURUNUIiwiVklTSUJJTElUSUVTIiwiVEFCX0JBUl9QT1NJVElPTl9UT1AiLCJUQUJfQkFSX1BPU0lUSU9OX0JPVFRPTSIsIlRBQl9CQVJfUE9TU0lUSU9OUyIsImNvbW1hbmRzIiwiaGVscGVycyIsImV4dGVuc2lvbnMiLCJpc1ZhbGlkRWxlbWVudElkZW50aWZpZXIiLCJpZCIsIl8iLCJpc1N0cmluZyIsImlzTnVtYmVyIiwiaXNFbXB0eSIsImlzTmFOIiwic2V0RnJhbWUiLCJmcmFtZSIsImlzV2ViQ29udGV4dCIsImVycm9ycyIsIk5vdEltcGxlbWVudGVkRXJyb3IiLCJpc051bGwiLCJjdXJXZWJGcmFtZXMiLCJsb2ciLCJkZWJ1ZyIsImhhc0VsZW1lbnRJZCIsImF0b21zRWxlbWVudCIsImdldEF0b21zRWxlbWVudCIsInZhbHVlIiwiZXhlY3V0ZUF0b20iLCJXSU5ET1ciLCJ1bnNoaWZ0IiwiYXRvbSIsImlzVW5kZWZpbmVkIiwiTm9TdWNoRnJhbWVFcnJvciIsImdldENzc1Byb3BlcnR5IiwicHJvcGVydHlOYW1lIiwiZWwiLCJzdWJtaXQiLCJyZWZyZXNoIiwiZ2V0VXJsIiwicmVtb3RlIiwiZXhlY3V0ZSIsInRpdGxlIiwiZ2V0Q29va2llcyIsInNjcmlwdCIsImpzQ29va2llcyIsImNvb2tpZXMiLCJuYW1lIiwidG9QYWlycyIsImNvb2tpZVV0aWxzIiwiY3JlYXRlSldQQ29va2llIiwidW5kZWZpbmVkIiwicHVzaCIsImVyciIsImVycm9yIiwiVW5rbm93bkVycm9yIiwic2V0Q29va2llIiwiY29va2llIiwiY2xvbmUiLCJwYXRoIiwianNDb29raWUiLCJjcmVhdGVKU0Nvb2tpZSIsImV4cGlyZXMiLCJleHBpcnkiLCJEYXRlIiwidG9VVENTdHJpbmciLCJkb21haW4iLCJodHRwT25seSIsInNlY3VyZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJkZWxldGVDb29raWUiLCJjb29raWVOYW1lIiwiaW5kZXhPZiIsIm1hcCIsIl9kZWxldGVDb29raWUiLCJkZWxldGVDb29raWVzIiwibGVuZ3RoIiwid2ViQ29va2llIiwiZXhwaXJlQ29va2llIiwiY2FjaGVXZWJFbGVtZW50IiwiaXNQbGFpbk9iamVjdCIsImVsSWQiLCJ1bndyYXBFbGVtZW50IiwiY2FjaGVJZCIsImluY2x1ZGVzIiwidXVpZFY0Iiwid2ViRWxlbWVudHNDYWNoZSIsInNldCIsIndyYXBFbGVtZW50IiwiY2FjaGVXZWJFbGVtZW50cyIsInJlc3BvbnNlIiwidG9DYWNoZWQiLCJ2IiwiaXNBcnJheSIsInJlc3VsdCIsInJlZHVjZSIsImFjYyIsImtleSIsImZpbmRXZWJFbGVtZW50T3JFbGVtZW50cyIsInN0cmF0ZWd5Iiwic2VsZWN0b3IiLCJtYW55IiwiY3R4IiwiY29udGV4dEVsZW1lbnQiLCJpc05pbCIsImVsZW1lbnQiLCJkb0ZpbmQiLCJpbXBsaWNpdFdhaXRGb3JDb25kaXRpb24iLCJtZXNzYWdlIiwiaXNGdW5jdGlvbiIsIm1hdGNoIiwiTm9TdWNoRWxlbWVudEVycm9yIiwiY2xpY2tXZWJDb29yZHMiLCJjb29yZHMiLCJ0cmFuc2xhdGVXZWJDb29yZHMiLCJjdXJXZWJDb29yZHMiLCJjbGlja0Nvb3JkcyIsImFyZ3MiLCJhbHdheXNEZWZhdWx0RnJhbWUiLCJmcmFtZXMiLCJwcm9taXNlIiwid2FpdEZvckF0b20iLCJleGVjdXRlQXRvbUFzeW5jIiwicmVzcG9uc2VVcmwiLCJCIiwicmVzb2x2ZSIsInJlamVjdCIsImFzeW5jUHJvbWlzZSIsImVsT3JJZCIsImhhcyIsIlN0YWxlRWxlbWVudFJlZmVyZW5jZUVycm9yIiwiRUxFTUVOVCIsImdldCIsImNvbnZlcnRFbGVtZW50c0ZvckF0b21zIiwiYXJnIiwiaXNFcnJvclR5cGUiLCJnZXRFbGVtZW50SWQiLCJoYXNWYWx1ZSIsImdldFNhZmFyaUlzSXBob25lIiwiaXNCb29sZWFuIiwiX2lzU2FmYXJpSXBob25lIiwidXNlckFnZW50IiwidG9Mb3dlckNhc2UiLCJ3YXJuIiwiZ2V0U2FmYXJpRGV2aWNlU2l6ZSIsIndpZHRoIiwiaGVpZ2h0Iiwibm9ybUhlaWdodCIsIm5vcm1XaWR0aCIsImdldFNhZmFyaUlzTm90Y2hlZCIsIl9pc1NhZmFyaU5vdGNoZWQiLCJkZXZpY2UiLCJnZXRFeHRyYVRyYW5zbGF0ZVdlYkNvb3Jkc09mZnNldCIsInd2UG9zIiwicmVhbERpbXMiLCJ0b3BPZmZzZXQiLCJib3R0b21PZmZzZXQiLCJpc0lwaG9uZSIsIm5hdGl2ZVdlYlRhcFRhYkJhclZpc2liaWxpdHkiLCJuYXRpdmVXZWJUYXBTbWFydEFwcEJhbm5lclZpc2liaWxpdHkiLCJzYWZhcmlUYWJCYXJQb3NpdGlvbiIsImNvbXBhcmVWZXJzaW9ucyIsIm9wdHMiLCJwbGF0Zm9ybVZlcnNpb24iLCJzZXR0aW5ncyIsImdldFNldHRpbmdzIiwidGFiQmFyVmlzaWJpbGl0eSIsImxvd2VyQ2FzZSIsImJhbm5lclZpc2liaWxpdHkiLCJ0YWJCYXJQb3NpdGlvbiIsIkludmFsaWRBcmd1bWVudEVycm9yIiwiaXNOb3RjaGVkIiwib3JpZW50YXRpb24iLCJub3RjaE9mZnNldCIsImlzU2Nyb2xsZWQiLCJjb250ZXh0c0FuZFZpZXdzIiwiZ2V0Q29udGV4dHNBbmRWaWV3cyIsInRhYnMiLCJmaWx0ZXIiLCJzdGFydHNXaXRoIiwiZ2V0RXh0cmFOYXRpdmVXZWJUYXBPZmZzZXQiLCJ5Iiwib2Zmc2V0IiwiYmFubmVycyIsImZpbmROYXRpdmVFbGVtZW50T3JFbGVtZW50cyIsInRhcFdlYkVsZW1lbnROYXRpdmVseSIsImRyaXZlciIsInRleHQiLCJlbHMiLCJyZWN0IiwicHJveHlDb21tYW5kIiwiZWwyIiwicmVjdDIiLCJ4IiwiTWF0aCIsInJvdW5kIiwibmF0aXZlV2ViVGFwIiwibmF0aXZlV2ViVGFwU3RyaWN0IiwiUHJvbWlzZSIsImFsbCIsInNpemUiLCJjb29yZGluYXRlcyIsInBlcmZvcm1Ub3VjaCIsImFjdGlvbiIsIm9wdGlvbnMiLCJ3ZWJ2aWV3IiwicmV0cnlJbnRlcnZhbCIsImlnbiIsIkVycm9yIiwiY21kIiwid3ZEaW1zIiwiaW1wbGljaXRXYWl0TXMiLCJzZXRJbXBsaWNpdFdhaXQiLCJ4UmF0aW8iLCJ5UmF0aW8iLCJuZXdDb29yZHMiLCJjaGVja0ZvckFsZXJ0IiwiZ2V0QWxlcnRUZXh0IiwidGltZXIiLCJ0aW1pbmciLCJUaW1lciIsInN0YXJ0IiwidGltZWRBdG9tUHJvbWlzZSIsInRpbWVvdXQiLCJoYW5kbGVQcm9taXNlRXJyb3IiLCJwIiwib3JpZ2luYWxFcnJvciIsIkFnZ3JlZ2F0ZUVycm9yIiwiVGltZW91dEVycm9yIiwiZ2V0RHVyYXRpb24iLCJhc01pbGxpU2Vjb25kcyIsInRvRml4ZWQiLCJhbnkiLCJkZWxheSIsImlzRnVsZmlsbGVkIiwiX3dhaXRpbmdBdG9tcyIsImNvdW50IiwiYWxlcnROb3RpZmllciIsIkV2ZW50RW1pdHRlciIsImFsZXJ0TW9uaXRvciIsIm9uQWxlcnRDYWxsYmFjayIsImlzUmVzb2x2ZWQiLCJlbWl0IiwiVW5leHBlY3RlZEFsZXJ0T3BlbkVycm9yIiwib25jZSIsInRoZW4iLCJjYXRjaCIsInJlbW92ZUxpc3RlbmVyIiwibW9iaWxlV2ViTmF2IiwibmF2VHlwZSIsImFsbG93TmF2aWdhdGlvbldpdGhvdXRSZWxvYWQiLCJPYmplY3QiLCJhc3NpZ24iXSwic291cmNlcyI6WyIuLi8uLi8uLi9saWIvY29tbWFuZHMvd2ViLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJldHJ5SW50ZXJ2YWwgfSBmcm9tICdhc3luY2JveCc7XG5pbXBvcnQgeyB1dGlsLCB0aW1pbmcgfSBmcm9tICdhcHBpdW0vc3VwcG9ydCc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IEIgZnJvbSAnYmx1ZWJpcmQnO1xuaW1wb3J0IHsgZXJyb3JzLCBpc0Vycm9yVHlwZSB9IGZyb20gJ2FwcGl1bS9kcml2ZXInO1xuaW1wb3J0IGNvb2tpZVV0aWxzIGZyb20gJy4uL2Nvb2tpZXMnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnZXZlbnRzJztcblxuY29uc3QgSVBIT05FX1RPUF9CQVJfSEVJR0hUID0gNzE7XG5jb25zdCBJUEhPTkVfU0NST0xMRURfVE9QX0JBUl9IRUlHSFQgPSA0MTtcbmNvbnN0IElQSE9ORV9YX1NDUk9MTEVEX09GRlNFVCA9IDU1O1xuY29uc3QgSVBIT05FX1hfTk9UQ0hfT0ZGU0VUX0lPUyA9IDI0O1xuY29uc3QgSVBIT05FX1hfTk9UQ0hfT0ZGU0VUX0lPU18xMyA9IDIwO1xuXG5jb25zdCBJUEhPTkVfTEFORFNDQVBFX1RPUF9CQVJfSEVJR0hUID0gNTE7XG5jb25zdCBJUEhPTkVfQk9UVE9NX0JBUl9PRkZTRVQgPSA0OTtcbmNvbnN0IFRBQl9CQVJfT0ZGU0VUID0gMzM7XG5jb25zdCBJUEhPTkVfV0VCX0NPT1JEX1NNQVJUX0FQUF9CQU5ORVJfT0ZGU0VUID0gODQ7XG5jb25zdCBJUEFEX1dFQl9DT09SRF9TTUFSVF9BUFBfQkFOTkVSX09GRlNFVCA9IDk1O1xuXG5jb25zdCBOT1RDSEVEX0RFVklDRV9TSVpFUyA9IFtcbiAge3c6IDExMjUsIGg6IDI0MzZ9LCAvLyAxMSBQcm8sIFgsIFhzXG4gIHt3OiA4MjgsIGg6IDE3OTJ9LCAvLyAxMSwgWHJcbiAge3c6IDEyNDIsIGg6IDI2ODh9LCAvLyAxMSBQcm8gTWF4LCBYcyBNYXhcbl07XG5cbmNvbnN0IHsgVzNDX1dFQl9FTEVNRU5UX0lERU5USUZJRVIgfSA9IHV0aWw7XG5cbmNvbnN0IEFUT01fV0FJVF9USU1FT1VUX01TID0gMiAqIDYwMDAwO1xuY29uc3QgQVRPTV9JTklUSUFMX1dBSVRfTVMgPSAxMDAwO1xuXG5jb25zdCBPTl9PQlNUUlVDVElOR19BTEVSVF9FVkVOVCA9ICdhbGVydCc7XG5cbmNvbnN0IFZJU0lCTEUgPSAndmlzaWJsZSc7XG5jb25zdCBJTlZJU0lCTEUgPSAnaW52aXNpYmxlJztcbmNvbnN0IERFVEVDVCA9ICdkZXRlY3QnO1xuY29uc3QgVklTSUJJTElUSUVTID0gW1ZJU0lCTEUsIElOVklTSUJMRSwgREVURUNUXTtcblxuLy8gVGhlIHBvc2l0aW9uIG9mIFNhZmFyaSdzIHRhYiAoc2VhcmNoIGJhcikuXG4vLyBTaW5jZSBpT1MgMTUsIHRoZSBiYXIgaXMgdGhlIGJvdHRvbSBieSBkZWZhdWx0LlxuY29uc3QgVEFCX0JBUl9QT1NJVElPTl9UT1AgPSAndG9wJztcbmNvbnN0IFRBQl9CQVJfUE9TSVRJT05fQk9UVE9NID0gJ2JvdHRvbSc7XG5jb25zdCBUQUJfQkFSX1BPU1NJVElPTlMgPSBbVEFCX0JBUl9QT1NJVElPTl9UT1AsIFRBQl9CQVJfUE9TSVRJT05fQk9UVE9NXTtcblxuY29uc3QgY29tbWFuZHMgPSB7fSwgaGVscGVycyA9IHt9LCBleHRlbnNpb25zID0ge307XG5cbmZ1bmN0aW9uIGlzVmFsaWRFbGVtZW50SWRlbnRpZmllciAoaWQpIHtcbiAgaWYgKCFfLmlzU3RyaW5nKGlkKSAmJiAhXy5pc051bWJlcihpZCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKF8uaXNTdHJpbmcoaWQpICYmIF8uaXNFbXB0eShpZCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKF8uaXNOdW1iZXIoaWQpICYmIGlzTmFOKGlkKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuY29tbWFuZHMuc2V0RnJhbWUgPSBhc3luYyBmdW5jdGlvbiBzZXRGcmFtZSAoZnJhbWUpIHtcbiAgaWYgKCF0aGlzLmlzV2ViQ29udGV4dCgpKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5Ob3RJbXBsZW1lbnRlZEVycm9yKCk7XG4gIH1cblxuICBpZiAoXy5pc051bGwoZnJhbWUpKSB7XG4gICAgdGhpcy5jdXJXZWJGcmFtZXMgPSBbXTtcbiAgICB0aGlzLmxvZy5kZWJ1ZygnTGVhdmluZyB3ZWIgZnJhbWUgYW5kIGdvaW5nIGJhY2sgdG8gZGVmYXVsdCBjb250ZW50Jyk7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKGhlbHBlcnMuaGFzRWxlbWVudElkKGZyYW1lKSkge1xuICAgIGNvbnN0IGF0b21zRWxlbWVudCA9IHRoaXMuZ2V0QXRvbXNFbGVtZW50KGZyYW1lKTtcbiAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ2dldF9mcmFtZV93aW5kb3cnLCBbYXRvbXNFbGVtZW50XSk7XG4gICAgdGhpcy5sb2cuZGVidWcoYEVudGVyaW5nIG5ldyB3ZWIgZnJhbWU6ICcke3ZhbHVlLldJTkRPV30nYCk7XG4gICAgdGhpcy5jdXJXZWJGcmFtZXMudW5zaGlmdCh2YWx1ZS5XSU5ET1cpO1xuICB9IGVsc2Uge1xuICAgIGNvbnN0IGF0b20gPSBfLmlzTnVtYmVyKGZyYW1lKSA/ICdmcmFtZV9ieV9pbmRleCcgOiAnZnJhbWVfYnlfaWRfb3JfbmFtZSc7XG4gICAgY29uc3QgdmFsdWUgPSBhd2FpdCB0aGlzLmV4ZWN1dGVBdG9tKGF0b20sIFtmcmFtZV0pO1xuICAgIGlmIChfLmlzTnVsbCh2YWx1ZSkgfHwgXy5pc1VuZGVmaW5lZCh2YWx1ZS5XSU5ET1cpKSB7XG4gICAgICB0aHJvdyBuZXcgZXJyb3JzLk5vU3VjaEZyYW1lRXJyb3IoKTtcbiAgICB9XG4gICAgdGhpcy5sb2cuZGVidWcoYEVudGVyaW5nIG5ldyB3ZWIgZnJhbWU6ICcke3ZhbHVlLldJTkRPV30nYCk7XG4gICAgdGhpcy5jdXJXZWJGcmFtZXMudW5zaGlmdCh2YWx1ZS5XSU5ET1cpO1xuICB9XG59O1xuXG5jb21tYW5kcy5nZXRDc3NQcm9wZXJ0eSA9IGFzeW5jIGZ1bmN0aW9uIGdldENzc1Byb3BlcnR5IChwcm9wZXJ0eU5hbWUsIGVsKSB7XG4gIGlmICghdGhpcy5pc1dlYkNvbnRleHQoKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuTm90SW1wbGVtZW50ZWRFcnJvcigpO1xuICB9XG5cbiAgY29uc3QgYXRvbXNFbGVtZW50ID0gdGhpcy5nZXRBdG9tc0VsZW1lbnQoZWwpO1xuICByZXR1cm4gYXdhaXQgdGhpcy5leGVjdXRlQXRvbSgnZ2V0X3ZhbHVlX29mX2Nzc19wcm9wZXJ0eScsIFthdG9tc0VsZW1lbnQsIHByb3BlcnR5TmFtZV0pO1xufTtcblxuY29tbWFuZHMuc3VibWl0ID0gYXN5bmMgZnVuY3Rpb24gc3VibWl0IChlbCkge1xuICBpZiAoIXRoaXMuaXNXZWJDb250ZXh0KCkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLk5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgfVxuXG4gIGNvbnN0IGF0b21zRWxlbWVudCA9IHRoaXMuZ2V0QXRvbXNFbGVtZW50KGVsKTtcbiAgYXdhaXQgdGhpcy5leGVjdXRlQXRvbSgnc3VibWl0JywgW2F0b21zRWxlbWVudF0pO1xufTtcblxuY29tbWFuZHMucmVmcmVzaCA9IGFzeW5jIGZ1bmN0aW9uIHJlZnJlc2ggKCkge1xuICBpZiAoIXRoaXMuaXNXZWJDb250ZXh0KCkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLk5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgfVxuXG4gIGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ3JlZnJlc2gnLCBbXSk7XG59O1xuXG5jb21tYW5kcy5nZXRVcmwgPSBhc3luYyBmdW5jdGlvbiBnZXRVcmwgKCkge1xuICBpZiAoIXRoaXMuaXNXZWJDb250ZXh0KCkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLk5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgfVxuXG4gIHJldHVybiBhd2FpdCB0aGlzLnJlbW90ZS5leGVjdXRlKCd3aW5kb3cubG9jYXRpb24uaHJlZicpO1xufTtcblxuY29tbWFuZHMudGl0bGUgPSBhc3luYyBmdW5jdGlvbiB0aXRsZSAoKSB7XG4gIGlmICghdGhpcy5pc1dlYkNvbnRleHQoKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuTm90SW1wbGVtZW50ZWRFcnJvcigpO1xuICB9XG5cbiAgcmV0dXJuIGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ3RpdGxlJywgW10sIHRydWUpO1xufTtcblxuY29tbWFuZHMuZ2V0Q29va2llcyA9IGFzeW5jIGZ1bmN0aW9uIGdldENvb2tpZXMgKCkge1xuICBpZiAoIXRoaXMuaXNXZWJDb250ZXh0KCkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLk5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgfVxuXG4gIHRoaXMubG9nLmRlYnVnKCdSZXRyaWV2aW5nIGFsbCBjb29raWVzJyk7XG5cbiAgbGV0IHNjcmlwdCA9ICdyZXR1cm4gZG9jdW1lbnQuY29va2llJztcbiAgbGV0IGpzQ29va2llcyA9IGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ2V4ZWN1dGVfc2NyaXB0JywgW3NjcmlwdCwgW11dKTtcblxuICBsZXQgY29va2llcyA9IFtdO1xuICB0cnkge1xuICAgIGZvciAobGV0IFtuYW1lLCB2YWx1ZV0gb2YgXy50b1BhaXJzKGNvb2tpZVV0aWxzLmNyZWF0ZUpXUENvb2tpZSh1bmRlZmluZWQsIGpzQ29va2llcykpKSB7XG4gICAgICBjb29raWVzLnB1c2goe25hbWUsIHZhbHVlfSk7XG4gICAgfVxuICAgIHJldHVybiBjb29raWVzO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aGlzLmxvZy5lcnJvcihlcnIpO1xuICAgIHRocm93IG5ldyBlcnJvcnMuVW5rbm93bkVycm9yKGBFcnJvciBwYXJzaW5nIGNvb2tpZXMgZnJvbSByZXN1bHQ6ICcke2pzQ29va2llc30nYCk7XG4gIH1cbn07XG5cbmNvbW1hbmRzLnNldENvb2tpZSA9IGFzeW5jIGZ1bmN0aW9uIHNldENvb2tpZSAoY29va2llKSB7XG4gIGlmICghdGhpcy5pc1dlYkNvbnRleHQoKSkge1xuICAgIHRocm93IG5ldyBlcnJvcnMuTm90SW1wbGVtZW50ZWRFcnJvcigpO1xuICB9XG5cbiAgY29va2llID0gXy5jbG9uZShjb29raWUpO1xuXG4gIC8vIGlmIGBwYXRoYCBmaWVsZCBpcyBub3Qgc3BlY2lmaWVkLCBTYWZhcmkgd2lsbCBub3QgdXBkYXRlIGNvb2tpZXMgYXMgZXhwZWN0ZWQ7IGVnIGlzc3VlICMxNzA4XG4gIGlmICghY29va2llLnBhdGgpIHtcbiAgICBjb29raWUucGF0aCA9ICcvJztcbiAgfVxuXG4gIGNvbnN0IGpzQ29va2llID0gY29va2llVXRpbHMuY3JlYXRlSlNDb29raWUoY29va2llLm5hbWUsIGNvb2tpZS52YWx1ZSwge1xuICAgIGV4cGlyZXM6IF8uaXNOdW1iZXIoY29va2llLmV4cGlyeSkgPyAobmV3IERhdGUoY29va2llLmV4cGlyeSAqIDEwMDApKS50b1VUQ1N0cmluZygpIDpcbiAgICAgIGNvb2tpZS5leHBpcnksXG4gICAgcGF0aDogY29va2llLnBhdGgsXG4gICAgZG9tYWluOiBjb29raWUuZG9tYWluLFxuICAgIGh0dHBPbmx5OiBjb29raWUuaHR0cE9ubHksXG4gICAgc2VjdXJlOiBjb29raWUuc2VjdXJlXG4gIH0pO1xuICBsZXQgc2NyaXB0ID0gYGRvY3VtZW50LmNvb2tpZSA9ICR7SlNPTi5zdHJpbmdpZnkoanNDb29raWUpfWA7XG4gIGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ2V4ZWN1dGVfc2NyaXB0JywgW3NjcmlwdCwgW11dKTtcbn07XG5cbmNvbW1hbmRzLmRlbGV0ZUNvb2tpZSA9IGFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUNvb2tpZSAoY29va2llTmFtZSkge1xuICBpZiAoIXRoaXMuaXNXZWJDb250ZXh0KCkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLk5vdEltcGxlbWVudGVkRXJyb3IoKTtcbiAgfVxuXG4gIC8vIGNoZWNrIGNvb2tpZSBleGlzdGVuY2VcbiAgbGV0IGNvb2tpZXMgPSBhd2FpdCB0aGlzLmdldENvb2tpZXMoKTtcbiAgaWYgKF8uaW5kZXhPZihfLm1hcChjb29raWVzLCAnbmFtZScpLCBjb29raWVOYW1lKSA9PT0gLTEpIHtcbiAgICB0aGlzLmxvZy5kZWJ1ZyhgQ29va2llICcke2Nvb2tpZU5hbWV9JyBub3QgZm91bmQuIElnbm9yaW5nLmApO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGF3YWl0IHRoaXMuX2RlbGV0ZUNvb2tpZShjb29raWVOYW1lKTtcbn07XG5cbmNvbW1hbmRzLmRlbGV0ZUNvb2tpZXMgPSBhc3luYyBmdW5jdGlvbiBkZWxldGVDb29raWVzICgpIHtcbiAgaWYgKCF0aGlzLmlzV2ViQ29udGV4dCgpKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5Ob3RJbXBsZW1lbnRlZEVycm9yKCk7XG4gIH1cblxuICBsZXQgY29va2llcyA9IGF3YWl0IHRoaXMuZ2V0Q29va2llcygpO1xuICBpZiAoY29va2llcy5sZW5ndGgpIHtcbiAgICBmb3IgKGxldCBjb29raWUgb2YgY29va2llcykge1xuICAgICAgYXdhaXQgdGhpcy5fZGVsZXRlQ29va2llKGNvb2tpZS5uYW1lKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59O1xuXG5oZWxwZXJzLl9kZWxldGVDb29raWUgPSBhc3luYyBmdW5jdGlvbiBfZGVsZXRlQ29va2llIChjb29raWVOYW1lKSB7XG4gIHRoaXMubG9nLmRlYnVnKGBEZWxldGluZyBjb29raWUgJyR7Y29va2llTmFtZX0nYCk7XG4gIGxldCB3ZWJDb29raWUgPSBjb29raWVVdGlscy5leHBpcmVDb29raWUoY29va2llTmFtZSwge3BhdGg6ICcvJ30pO1xuICBsZXQgc2NyaXB0ID0gYGRvY3VtZW50LmNvb2tpZSA9ICR7SlNPTi5zdHJpbmdpZnkod2ViQ29va2llKX1gO1xuICBhd2FpdCB0aGlzLmV4ZWN1dGVBdG9tKCdleGVjdXRlX3NjcmlwdCcsIFtzY3JpcHQsIFtdXSk7XG59O1xuXG5oZWxwZXJzLmNhY2hlV2ViRWxlbWVudCA9IGZ1bmN0aW9uIGNhY2hlV2ViRWxlbWVudCAoZWwpIHtcbiAgaWYgKCFfLmlzUGxhaW5PYmplY3QoZWwpKSB7XG4gICAgcmV0dXJuIGVsO1xuICB9XG4gIGNvbnN0IGVsSWQgPSB1dGlsLnVud3JhcEVsZW1lbnQoZWwpO1xuICBpZiAoIWlzVmFsaWRFbGVtZW50SWRlbnRpZmllcihlbElkKSkge1xuICAgIHJldHVybiBlbDtcbiAgfVxuICAvLyBJbiBuZXdlciBkZWJ1Z2dlciByZWxlYXNlcyBlbGVtZW50IGlkZW50aWZpZXJzIGxvb2sgbGlrZSBgOndkYzoxNjI4MTUxNjQ5MzI1YFxuICAvLyBXZSBhc3N1bWUgaXQgaXMgc2FmZSB0byB1c2UgdGhlc2UgdG8gaWRlbnRpZnkgY2FjaGVkIGVsZW1lbnRzXG4gIGNvbnN0IGNhY2hlSWQgPSBfLmluY2x1ZGVzKGVsSWQsICc6JykgPyBlbElkIDogdXRpbC51dWlkVjQoKTtcbiAgdGhpcy53ZWJFbGVtZW50c0NhY2hlLnNldChjYWNoZUlkLCBlbElkKTtcbiAgcmV0dXJuIHV0aWwud3JhcEVsZW1lbnQoY2FjaGVJZCk7XG59O1xuXG5oZWxwZXJzLmNhY2hlV2ViRWxlbWVudHMgPSBmdW5jdGlvbiBjYWNoZVdlYkVsZW1lbnRzIChyZXNwb25zZSkge1xuICBjb25zdCB0b0NhY2hlZCA9ICh2KSA9PiBfLmlzQXJyYXkodikgfHwgXy5pc1BsYWluT2JqZWN0KHYpXG4gICAgPyB0aGlzLmNhY2hlV2ViRWxlbWVudHModilcbiAgICA6IHY7XG5cbiAgaWYgKF8uaXNBcnJheShyZXNwb25zZSkpIHtcbiAgICByZXR1cm4gcmVzcG9uc2UubWFwKHRvQ2FjaGVkKTtcbiAgfSBlbHNlIGlmIChfLmlzUGxhaW5PYmplY3QocmVzcG9uc2UpKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gey4uLnJlc3BvbnNlLCAuLi4odGhpcy5jYWNoZVdlYkVsZW1lbnQocmVzcG9uc2UpKX07XG4gICAgcmV0dXJuIF8udG9QYWlycyhyZXN1bHQpLnJlZHVjZShcbiAgICAgIChhY2MsIFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBhY2Nba2V5XSA9IHRvQ2FjaGVkKHZhbHVlKTtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH0sIHt9XG4gICAgKTtcbiAgfVxuICByZXR1cm4gcmVzcG9uc2U7XG59O1xuXG5leHRlbnNpb25zLmZpbmRXZWJFbGVtZW50T3JFbGVtZW50cyA9IGFzeW5jIGZ1bmN0aW9uIGZpbmRXZWJFbGVtZW50T3JFbGVtZW50cyAoc3RyYXRlZ3ksIHNlbGVjdG9yLCBtYW55LCBjdHgpIHtcbiAgY29uc3QgY29udGV4dEVsZW1lbnQgPSBfLmlzTmlsKGN0eCkgPyBudWxsIDogdGhpcy5nZXRBdG9tc0VsZW1lbnQoY3R4KTtcbiAgbGV0IGVsZW1lbnQ7XG4gIGxldCBkb0ZpbmQgPSBhc3luYyAoKSA9PiB7XG4gICAgZWxlbWVudCA9IGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oYGZpbmRfZWxlbWVudCR7bWFueSA/ICdzJyA6ICcnfWAsIFtzdHJhdGVneSwgc2VsZWN0b3IsIGNvbnRleHRFbGVtZW50XSk7XG4gICAgcmV0dXJuICFfLmlzTnVsbChlbGVtZW50KTtcbiAgfTtcbiAgdHJ5IHtcbiAgICBhd2FpdCB0aGlzLmltcGxpY2l0V2FpdEZvckNvbmRpdGlvbihkb0ZpbmQpO1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBpZiAoZXJyLm1lc3NhZ2UgJiYgXy5pc0Z1bmN0aW9uKGVyci5tZXNzYWdlLm1hdGNoKSAmJiBlcnIubWVzc2FnZS5tYXRjaCgvQ29uZGl0aW9uIHVubWV0LykpIHtcbiAgICAgIC8vIGNvbmRpdGlvbiB3YXMgbm90IG1ldCBzZXR0aW5nIHJlcyB0byBlbXB0eSBhcnJheVxuICAgICAgZWxlbWVudCA9IFtdO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuICB9XG5cbiAgaWYgKG1hbnkpIHtcbiAgICByZXR1cm4gdGhpcy5jYWNoZVdlYkVsZW1lbnRzKGVsZW1lbnQpO1xuICB9XG4gIGlmIChfLmlzRW1wdHkoZWxlbWVudCkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLk5vU3VjaEVsZW1lbnRFcnJvcigpO1xuICB9XG4gIHJldHVybiB0aGlzLmNhY2hlV2ViRWxlbWVudHMoZWxlbWVudCk7XG59O1xuXG5leHRlbnNpb25zLmNsaWNrV2ViQ29vcmRzID0gYXN5bmMgZnVuY3Rpb24gY2xpY2tXZWJDb29yZHMgKCkge1xuICBsZXQgY29vcmRzID0gYXdhaXQgdGhpcy50cmFuc2xhdGVXZWJDb29yZHModGhpcy5jdXJXZWJDb29yZHMpO1xuICBhd2FpdCB0aGlzLmNsaWNrQ29vcmRzKGNvb3Jkcyk7XG59O1xuXG5oZWxwZXJzLmV4ZWN1dGVBdG9tID0gYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUF0b20gKGF0b20sIGFyZ3MsIGFsd2F5c0RlZmF1bHRGcmFtZSA9IGZhbHNlKSB7XG4gIGxldCBmcmFtZXMgPSBhbHdheXNEZWZhdWx0RnJhbWUgPT09IHRydWUgPyBbXSA6IHRoaXMuY3VyV2ViRnJhbWVzO1xuICBsZXQgcHJvbWlzZSA9IHRoaXMucmVtb3RlLmV4ZWN1dGVBdG9tKGF0b20sIGFyZ3MsIGZyYW1lcyk7XG4gIHJldHVybiBhd2FpdCB0aGlzLndhaXRGb3JBdG9tKHByb21pc2UpO1xufTtcblxuaGVscGVycy5leGVjdXRlQXRvbUFzeW5jID0gYXN5bmMgZnVuY3Rpb24gZXhlY3V0ZUF0b21Bc3luYyAoYXRvbSwgYXJncywgcmVzcG9uc2VVcmwpIHtcbiAgLy8gc2F2ZSB0aGUgcmVzb2x2ZSBhbmQgcmVqZWN0IG1ldGhvZHMgb2YgdGhlIHByb21pc2UgdG8gYmUgd2FpdGVkIGZvclxuICBsZXQgcHJvbWlzZSA9IG5ldyBCKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICB0aGlzLmFzeW5jUHJvbWlzZSA9IHtyZXNvbHZlLCByZWplY3R9O1xuICB9KTtcbiAgYXdhaXQgdGhpcy5yZW1vdGUuZXhlY3V0ZUF0b21Bc3luYyhhdG9tLCBhcmdzLCB0aGlzLmN1cldlYkZyYW1lcywgcmVzcG9uc2VVcmwpO1xuICByZXR1cm4gYXdhaXQgdGhpcy53YWl0Rm9yQXRvbShwcm9taXNlKTtcbn07XG5cbmhlbHBlcnMuZ2V0QXRvbXNFbGVtZW50ID0gZnVuY3Rpb24gZ2V0QXRvbXNFbGVtZW50IChlbE9ySWQpIHtcbiAgY29uc3QgZWxJZCA9IHV0aWwudW53cmFwRWxlbWVudChlbE9ySWQpO1xuICBpZiAoIXRoaXMud2ViRWxlbWVudHNDYWNoZS5oYXMoZWxJZCkpIHtcbiAgICB0aHJvdyBuZXcgZXJyb3JzLlN0YWxlRWxlbWVudFJlZmVyZW5jZUVycm9yKCk7XG4gIH1cbiAgcmV0dXJuIHtFTEVNRU5UOiB0aGlzLndlYkVsZW1lbnRzQ2FjaGUuZ2V0KGVsSWQpfTtcbn07XG5cbmhlbHBlcnMuY29udmVydEVsZW1lbnRzRm9yQXRvbXMgPSBmdW5jdGlvbiBjb252ZXJ0RWxlbWVudHNGb3JBdG9tcyAoYXJncyA9IFtdKSB7XG4gIHJldHVybiBhcmdzLm1hcCgoYXJnKSA9PiB7XG4gICAgaWYgKGhlbHBlcnMuaGFzRWxlbWVudElkKGFyZykpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldEF0b21zRWxlbWVudChhcmcpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGlmICghaXNFcnJvclR5cGUoZXJyLCBlcnJvcnMuU3RhbGVFbGVtZW50UmVmZXJlbmNlRXJyb3IpKSB7XG4gICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gYXJnO1xuICAgIH1cbiAgICByZXR1cm4gXy5pc0FycmF5KGFyZykgPyB0aGlzLmNvbnZlcnRFbGVtZW50c0ZvckF0b21zKGFyZykgOiBhcmc7XG4gIH0pO1xufTtcblxuaGVscGVycy5nZXRFbGVtZW50SWQgPSBmdW5jdGlvbiBnZXRFbGVtZW50SWQgKGVsZW1lbnQpIHtcbiAgcmV0dXJuIGVsZW1lbnQuRUxFTUVOVCB8fCBlbGVtZW50W1czQ19XRUJfRUxFTUVOVF9JREVOVElGSUVSXTtcbn07XG5cbmhlbHBlcnMuaGFzRWxlbWVudElkID0gZnVuY3Rpb24gaGFzRWxlbWVudElkIChlbGVtZW50KSB7XG4gIHJldHVybiB1dGlsLmhhc1ZhbHVlKGVsZW1lbnQpICYmICh1dGlsLmhhc1ZhbHVlKGVsZW1lbnQuRUxFTUVOVCkgfHwgdXRpbC5oYXNWYWx1ZShlbGVtZW50W1czQ19XRUJfRUxFTUVOVF9JREVOVElGSUVSXSkpO1xufTtcblxuZXh0ZW5zaW9ucy5nZXRTYWZhcmlJc0lwaG9uZSA9IGFzeW5jIGZ1bmN0aW9uIGdldFNhZmFyaUlzSXBob25lICgpIHtcbiAgaWYgKF8uaXNCb29sZWFuKHRoaXMuX2lzU2FmYXJpSXBob25lKSkge1xuICAgIHJldHVybiB0aGlzLl9pc1NhZmFyaUlwaG9uZTtcbiAgfVxuICB0cnkge1xuICAgIGNvbnN0IHVzZXJBZ2VudCA9IGF3YWl0IHRoaXMuZXhlY3V0ZSgncmV0dXJuIG5hdmlnYXRvci51c2VyQWdlbnQnKTtcbiAgICB0aGlzLl9pc1NhZmFyaUlwaG9uZSA9IHVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdpcGhvbmUnKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhpcy5sb2cud2FybihgVW5hYmxlIHRvIGZpbmQgZGV2aWNlIHR5cGUgZnJvbSB1c2VyYWdlbnQuIEFzc3VtaW5nIGlQaG9uZWApO1xuICAgIHRoaXMubG9nLmRlYnVnKGBFcnJvcjogJHtlcnIubWVzc2FnZX1gKTtcbiAgfVxuICByZXR1cm4gdGhpcy5faXNTYWZhcmlJcGhvbmUgPz8gdHJ1ZTtcbn07XG5cbmV4dGVuc2lvbnMuZ2V0U2FmYXJpRGV2aWNlU2l6ZSA9IGFzeW5jIGZ1bmN0aW9uIGdldFNhZmFyaURldmljZVNpemUgKCkge1xuICBjb25zdCBzY3JpcHQgPSAncmV0dXJuIHtoZWlnaHQ6IHdpbmRvdy5zY3JlZW4uYXZhaWxIZWlnaHQgKiB3aW5kb3cuZGV2aWNlUGl4ZWxSYXRpbywgd2lkdGg6IHdpbmRvdy5zY3JlZW4uYXZhaWxXaWR0aCAqIHdpbmRvdy5kZXZpY2VQaXhlbFJhdGlvfTsnO1xuICBjb25zdCB7d2lkdGgsIGhlaWdodH0gPSBhd2FpdCB0aGlzLmV4ZWN1dGUoc2NyaXB0KTtcbiAgY29uc3QgW25vcm1IZWlnaHQsIG5vcm1XaWR0aF0gPSBoZWlnaHQgPiB3aWR0aCA/IFtoZWlnaHQsIHdpZHRoXSA6IFt3aWR0aCwgaGVpZ2h0XTtcbiAgcmV0dXJuIHtcbiAgICB3aWR0aDogbm9ybVdpZHRoLFxuICAgIGhlaWdodDogbm9ybUhlaWdodCxcbiAgfTtcbn07XG5cbmV4dGVuc2lvbnMuZ2V0U2FmYXJpSXNOb3RjaGVkID0gYXN5bmMgZnVuY3Rpb24gZ2V0U2FmYXJpSXNOb3RjaGVkICgpIHtcbiAgaWYgKF8uaXNCb29sZWFuKHRoaXMuX2lzU2FmYXJpTm90Y2hlZCkpIHtcbiAgICByZXR1cm4gdGhpcy5faXNTYWZhcmlOb3RjaGVkO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7d2lkdGgsIGhlaWdodH0gPSBhd2FpdCB0aGlzLmdldFNhZmFyaURldmljZVNpemUoKTtcbiAgICBmb3IgKGNvbnN0IGRldmljZSBvZiBOT1RDSEVEX0RFVklDRV9TSVpFUykge1xuICAgICAgaWYgKGRldmljZS53ID09PSB3aWR0aCAmJiBkZXZpY2UuaCA9PT0gaGVpZ2h0KSB7XG4gICAgICAgIHRoaXMuX2lzU2FmYXJpTm90Y2hlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlcnIpIHtcbiAgICB0aGlzLmxvZy53YXJuKGBVbmFibGUgdG8gZmluZCBkZXZpY2UgdHlwZSBmcm9tIGRpbWVuc2lvbnMuIEFzc3VtaW5nIHRoZSBkZXZpY2UgaXMgbm90IG5vdGNoZWRgKTtcbiAgICB0aGlzLmxvZy5kZWJ1ZyhgRXJyb3I6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gIH1cbiAgcmV0dXJuIHRoaXMuX2lzU2FmYXJpTm90Y2hlZCA/PyBmYWxzZTtcbn07XG5cbmV4dGVuc2lvbnMuZ2V0RXh0cmFUcmFuc2xhdGVXZWJDb29yZHNPZmZzZXQgPSBhc3luYyBmdW5jdGlvbiBnZXRFeHRyYVRyYW5zbGF0ZVdlYkNvb3Jkc09mZnNldCAod3ZQb3MsIHJlYWxEaW1zKSB7XG4gIGxldCB0b3BPZmZzZXQgPSAwO1xuICBsZXQgYm90dG9tT2Zmc2V0ID0gMDtcblxuICBjb25zdCBpc0lwaG9uZSA9IGF3YWl0IHRoaXMuZ2V0U2FmYXJpSXNJcGhvbmUoKTtcblxuICAvLyBObyBuZWVkIHRvIGNoZWNrIHdoZXRoZXIgdGhlIFNtYXJ0IEFwcCBCYW5uZXIgb3IgVGFiIEJhciBpcyB2aXNpYmxlIG9yIG5vdFxuICAvLyBpZiBhbHJlYWR5IGRlZmluZWQgYnkgbmF0aXZlV2ViVGFwVGFiQmFyVmlzaWJpbGl0eSBvciBuYXRpdmVXZWJUYXBTbWFydEFwcEJhbm5lclZpc2liaWxpdHkgaW4gc2V0dGluZ3MuXG4gIGNvbnN0IHtcbiAgICBuYXRpdmVXZWJUYXBUYWJCYXJWaXNpYmlsaXR5LFxuICAgIG5hdGl2ZVdlYlRhcFNtYXJ0QXBwQmFubmVyVmlzaWJpbGl0eSxcbiAgICBzYWZhcmlUYWJCYXJQb3NpdGlvbiA9IHV0aWwuY29tcGFyZVZlcnNpb25zKHRoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb24sICc+PScsICcxNS4wJykgJiYgaXNJcGhvbmVcbiAgICAgID8gVEFCX0JBUl9QT1NJVElPTl9CT1RUT00gOiBUQUJfQkFSX1BPU0lUSU9OX1RPUCxcbiAgfSA9IGF3YWl0IHRoaXMuc2V0dGluZ3MuZ2V0U2V0dGluZ3MoKTtcbiAgbGV0IHRhYkJhclZpc2liaWxpdHkgPSBfLmxvd2VyQ2FzZShuYXRpdmVXZWJUYXBUYWJCYXJWaXNpYmlsaXR5KTtcbiAgbGV0IGJhbm5lclZpc2liaWxpdHkgPSBfLmxvd2VyQ2FzZShuYXRpdmVXZWJUYXBTbWFydEFwcEJhbm5lclZpc2liaWxpdHkpO1xuICBjb25zdCB0YWJCYXJQb3NpdGlvbiA9IF8ubG93ZXJDYXNlKHNhZmFyaVRhYkJhclBvc2l0aW9uKTtcblxuICBpZiAoIVZJU0lCSUxJVElFUy5pbmNsdWRlcyh0YWJCYXJWaXNpYmlsaXR5KSkge1xuICAgIHRhYkJhclZpc2liaWxpdHkgPSBERVRFQ1Q7XG4gIH1cbiAgaWYgKCFWSVNJQklMSVRJRVMuaW5jbHVkZXMoYmFubmVyVmlzaWJpbGl0eSkpIHtcbiAgICBiYW5uZXJWaXNpYmlsaXR5ID0gREVURUNUO1xuICB9XG5cbiAgaWYgKCFUQUJfQkFSX1BPU1NJVElPTlMuaW5jbHVkZXModGFiQmFyUG9zaXRpb24pKSB7XG4gICAgdGhyb3cgbmV3IGVycm9ycy5JbnZhbGlkQXJndW1lbnRFcnJvcihcbiAgICAgIGAke3NhZmFyaVRhYkJhclBvc2l0aW9ufSBpcyBpbnZhbGlkIGFzIFNhZmFyaSB0YWIgYmFyIHBvc2l0aW9uLiBBdmFpbGFibGUgcG9zaXRpb25zIGFyZSAke1RBQl9CQVJfUE9TU0lUSU9OU30uYCk7XG4gIH1cblxuICBjb25zdCBpc05vdGNoZWQgPSBpc0lwaG9uZSAmJiBhd2FpdCB0aGlzLmdldFNhZmFyaUlzTm90Y2hlZCgpO1xuXG4gIGNvbnN0IG9yaWVudGF0aW9uID0gcmVhbERpbXMuaCA+IHJlYWxEaW1zLncgPyAnUE9SVFJBSVQnIDogJ0xBTkRTQ0FQRSc7XG5cbiAgY29uc3Qgbm90Y2hPZmZzZXQgPSBpc05vdGNoZWRcbiAgICA/IHV0aWwuY29tcGFyZVZlcnNpb25zKHRoaXMub3B0cy5wbGF0Zm9ybVZlcnNpb24sICc9JywgJzEzLjAnKVxuICAgICAgPyBJUEhPTkVfWF9OT1RDSF9PRkZTRVRfSU9TXzEzXG4gICAgICA6IElQSE9ORV9YX05PVENIX09GRlNFVF9JT1NcbiAgICA6IDA7XG5cbiAgY29uc3QgaXNTY3JvbGxlZCA9IGF3YWl0IHRoaXMuZXhlY3V0ZSgncmV0dXJuIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPiAwJyk7XG4gIGlmIChpc1Njcm9sbGVkKSB7XG4gICAgdG9wT2Zmc2V0ID0gSVBIT05FX1NDUk9MTEVEX1RPUF9CQVJfSEVJR0hUICsgbm90Y2hPZmZzZXQ7XG5cbiAgICBpZiAoaXNOb3RjaGVkKSB7XG4gICAgICB0b3BPZmZzZXQgLT0gSVBIT05FX1hfU0NST0xMRURfT0ZGU0VUO1xuICAgIH1cblxuICAgIC8vIElmIHRoZSBpUGhvbmUgaXMgbGFuZHNjYXBlIHRoZW4gdGhlcmUgaXMgbm8gdG9wIGJhclxuICAgIGlmIChvcmllbnRhdGlvbiA9PT0gJ0xBTkRTQ0FQRScgJiYgaXNJcGhvbmUpIHtcbiAgICAgIHRvcE9mZnNldCA9IDA7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRvcE9mZnNldCA9IHRhYkJhclBvc2l0aW9uID09PSBUQUJfQkFSX1BPU0lUSU9OX0JPVFRPTSA/IDAgOiBJUEhPTkVfVE9QX0JBUl9IRUlHSFQ7XG4gICAgdG9wT2Zmc2V0ICs9IG5vdGNoT2Zmc2V0O1xuICAgIHRoaXMubG9nLmRlYnVnKGB0YWJCYXJQb3NpdGlvbiBhbmQgdG9wT2Zmc2V0OiAke3RhYkJhclBvc2l0aW9ufSwgJHt0b3BPZmZzZXR9YCk7XG5cbiAgICBpZiAoaXNJcGhvbmUpIHtcbiAgICAgIGlmIChvcmllbnRhdGlvbiA9PT0gJ1BPUlRSQUlUJykge1xuICAgICAgICAvLyBUaGUgYm90dG9tIGJhciBpcyBvbmx5IHZpc2libGUgd2hlbiBwb3J0cmFpdFxuICAgICAgICBib3R0b21PZmZzZXQgPSBJUEhPTkVfQk9UVE9NX0JBUl9PRkZTRVQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0b3BPZmZzZXQgPSBJUEhPTkVfTEFORFNDQVBFX1RPUF9CQVJfSEVJR0hUO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChvcmllbnRhdGlvbiA9PT0gJ0xBTkRTQ0FQRScgfHwgIWlzSXBob25lKSB7XG4gICAgICBpZiAodGFiQmFyVmlzaWJpbGl0eSA9PT0gVklTSUJMRSkge1xuICAgICAgICB0b3BPZmZzZXQgKz0gVEFCX0JBUl9PRkZTRVQ7XG4gICAgICB9IGVsc2UgaWYgKHRhYkJhclZpc2liaWxpdHkgPT09IERFVEVDVCkge1xuICAgICAgICAvLyBUYWJzIG9ubHkgYXBwZWFyIGlmIHRoZSBkZXZpY2UgaXMgbGFuZHNjYXBlIG9yIGlmIGl0J3MgYW4gaVBhZCBzbyB3ZSBvbmx5IGNoZWNrIHZpc2liaWxpdHkgaW4gdGhpcyBjYXNlXG4gICAgICAgIC8vIEFzc3VtZSB0aGF0IGVhY2ggdGFiIGJhciBpcyBhIFdlYlZpZXdcbiAgICAgICAgY29uc3QgY29udGV4dHNBbmRWaWV3cyA9IGF3YWl0IHRoaXMuZ2V0Q29udGV4dHNBbmRWaWV3cygpO1xuICAgICAgICBjb25zdCB0YWJzID0gY29udGV4dHNBbmRWaWV3cy5maWx0ZXIoKGN0eCkgPT4gY3R4LmlkLnN0YXJ0c1dpdGgoJ1dFQlZJRVdfJykpO1xuXG4gICAgICAgIGlmICh0YWJzLmxlbmd0aCA+IDEpIHtcbiAgICAgICAgICB0aGlzLmxvZy5kZWJ1ZyhgRm91bmQgJHt0YWJzLmxlbmd0aH0gdGFicy4gQXNzdW1pbmcgdGhlIHRhYiBiYXIgaXMgdmlzaWJsZWApO1xuICAgICAgICAgIHRvcE9mZnNldCArPSBUQUJfQkFSX09GRlNFVDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHRvcE9mZnNldCArPSBhd2FpdCB0aGlzLmdldEV4dHJhTmF0aXZlV2ViVGFwT2Zmc2V0KGlzSXBob25lLCBiYW5uZXJWaXNpYmlsaXR5KTtcblxuICB3dlBvcy55ICs9IHRvcE9mZnNldDtcbiAgcmVhbERpbXMuaCAtPSAodG9wT2Zmc2V0ICsgYm90dG9tT2Zmc2V0KTtcbn07XG5cbmV4dGVuc2lvbnMuZ2V0RXh0cmFOYXRpdmVXZWJUYXBPZmZzZXQgPSBhc3luYyBmdW5jdGlvbiBnZXRFeHRyYU5hdGl2ZVdlYlRhcE9mZnNldCAoaXNJcGhvbmUsIGJhbm5lclZpc2liaWxpdHkpIHtcbiAgbGV0IG9mZnNldCA9IDA7XG5cbiAgaWYgKGJhbm5lclZpc2liaWxpdHkgPT09IFZJU0lCTEUpIHtcbiAgICBvZmZzZXQgKz0gaXNJcGhvbmUgP1xuICAgICAgSVBIT05FX1dFQl9DT09SRF9TTUFSVF9BUFBfQkFOTkVSX09GRlNFVCA6XG4gICAgICBJUEFEX1dFQl9DT09SRF9TTUFSVF9BUFBfQkFOTkVSX09GRlNFVDtcbiAgfSBlbHNlIGlmIChiYW5uZXJWaXNpYmlsaXR5ID09PSBERVRFQ1QpIHtcbiAgICAvLyB0cnkgdG8gc2VlIGlmIHRoZXJlIGlzIGFuIFNtYXJ0IEFwcCBCYW5uZXJcbiAgICBjb25zdCBiYW5uZXJzID0gYXdhaXQgdGhpcy5maW5kTmF0aXZlRWxlbWVudE9yRWxlbWVudHMoJ2FjY2Vzc2liaWxpdHkgaWQnLCAnQ2xvc2UgYXBwIGRvd25sb2FkIG9mZmVyJywgdHJ1ZSk7XG4gICAgaWYgKGJhbm5lcnMubGVuZ3RoID4gMCkge1xuICAgICAgb2Zmc2V0ICs9IGlzSXBob25lID9cbiAgICAgICAgSVBIT05FX1dFQl9DT09SRF9TTUFSVF9BUFBfQkFOTkVSX09GRlNFVCA6XG4gICAgICAgIElQQURfV0VCX0NPT1JEX1NNQVJUX0FQUF9CQU5ORVJfT0ZGU0VUO1xuICAgIH1cbiAgfVxuXG4gIHRoaXMubG9nLmRlYnVnKGBBZGRpdGlvbmFsIG5hdGl2ZSB3ZWIgdGFwIG9mZnNldCBjb21wdXRlZDogJHtvZmZzZXR9YCk7XG4gIHJldHVybiBvZmZzZXQ7XG59O1xuXG5hc3luYyBmdW5jdGlvbiB0YXBXZWJFbGVtZW50TmF0aXZlbHkgKGRyaXZlciwgYXRvbXNFbGVtZW50KSB7XG4gIC8vIHRyeSB0byBnZXQgdGhlIHRleHQgb2YgdGhlIGVsZW1lbnQsIHdoaWNoIHdpbGwgYmUgYWNjZXNzaWJsZSBpbiB0aGVcbiAgLy8gbmF0aXZlIGNvbnRleHRcbiAgdHJ5IHtcbiAgICBsZXQgdGV4dCA9IGF3YWl0IGRyaXZlci5leGVjdXRlQXRvbSgnZ2V0X3RleHQnLCBbYXRvbXNFbGVtZW50XSk7XG4gICAgaWYgKCF0ZXh0KSB7XG4gICAgICB0ZXh0ID0gYXdhaXQgZHJpdmVyLmV4ZWN1dGVBdG9tKCdnZXRfYXR0cmlidXRlX3ZhbHVlJywgW2F0b21zRWxlbWVudCwgJ3ZhbHVlJ10pO1xuICAgIH1cblxuICAgIGlmICh0ZXh0KSB7XG4gICAgICBjb25zdCBlbHMgPSBhd2FpdCBkcml2ZXIuZmluZE5hdGl2ZUVsZW1lbnRPckVsZW1lbnRzKCdhY2Nlc3NpYmlsaXR5IGlkJywgdGV4dCwgdHJ1ZSk7XG4gICAgICBpZiAoZWxzLmxlbmd0aCA9PT0gMSB8fCBlbHMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIGNvbnN0IGVsID0gZWxzWzBdO1xuICAgICAgICAvLyB1c2UgdGFwIGJlY2F1c2Ugb24gaU9TIDExLjIgYW5kIGJlbG93IGBuYXRpdmVDbGlja2AgY3Jhc2hlcyBXREFcbiAgICAgICAgY29uc3QgcmVjdCA9IGF3YWl0IGRyaXZlci5wcm94eUNvbW1hbmQoYC9lbGVtZW50LyR7dXRpbC51bndyYXBFbGVtZW50KGVsKX0vcmVjdGAsICdHRVQnKTtcbiAgICAgICAgaWYgKGVscy5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICBjb25zdCBlbDIgPSBlbHNbMV07XG4gICAgICAgICAgY29uc3QgcmVjdDIgPSBhd2FpdCBkcml2ZXIucHJveHlDb21tYW5kKGAvZWxlbWVudC8ke3V0aWwudW53cmFwRWxlbWVudChlbDIpfS9yZWN0YCwgJ0dFVCcpO1xuXG4gICAgICAgICAgaWYgKChyZWN0LnggIT09IHJlY3QyLnggfHwgcmVjdC55ICE9PSByZWN0Mi55KSB8fFxuICAgICAgICAgIChyZWN0LndpZHRoICE9PSByZWN0Mi53aWR0aCB8fCByZWN0LmhlaWdodCAhPT0gcmVjdDIuaGVpZ2h0KSkge1xuICAgICAgICAgICAgLy8gVGhlc2UgMiBuYXRpdmUgZWxlbWVudHMgYXJlIG5vdCByZWZlcnJpbmcgdG8gdGhlIHNhbWUgd2ViIGVsZW1lbnRcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY29vcmRzID0ge1xuICAgICAgICAgIHg6IE1hdGgucm91bmQocmVjdC54ICsgcmVjdC53aWR0aCAvIDIpLFxuICAgICAgICAgIHk6IE1hdGgucm91bmQocmVjdC55ICsgcmVjdC5oZWlnaHQgLyAyKSxcbiAgICAgICAgfTtcbiAgICAgICAgYXdhaXQgZHJpdmVyLmNsaWNrQ29vcmRzKGNvb3Jkcyk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgLy8gYW55IGZhaWx1cmUgc2hvdWxkIGZhbGwgdGhyb3VnaCBhbmQgdHJpZ2dlciB0aGUgbW9yZSBlbGFib3JhdGVcbiAgICAvLyBtZXRob2Qgb2YgY2xpY2tpbmdcbiAgICBkcml2ZXIubG9nLndhcm4oYEVycm9yIGF0dGVtcHRpbmcgdG8gY2xpY2s6ICR7ZXJyLm1lc3NhZ2V9YCk7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5leHRlbnNpb25zLm5hdGl2ZVdlYlRhcCA9IGFzeW5jIGZ1bmN0aW9uIG5hdGl2ZVdlYlRhcCAoZWwpIHtcbiAgY29uc3QgYXRvbXNFbGVtZW50ID0gdGhpcy5nZXRBdG9tc0VsZW1lbnQoZWwpO1xuXG4gIC8vIGlmIHN0cmljdCBuYXRpdmUgdGFwLCBkbyBub3QgdHJ5IHRvIGRvIGl0IHdpdGggV0RBIGRpcmVjdGx5XG4gIGlmICghKGF3YWl0IHRoaXMuc2V0dGluZ3MuZ2V0U2V0dGluZ3MoKSkubmF0aXZlV2ViVGFwU3RyaWN0ICYmIGF3YWl0IHRhcFdlYkVsZW1lbnROYXRpdmVseSh0aGlzLCBhdG9tc0VsZW1lbnQpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHRoaXMubG9nLndhcm4oJ1VuYWJsZSB0byBkbyBzaW1wbGUgbmF0aXZlIHdlYiB0YXAuIEF0dGVtcHRpbmcgdG8gY29udmVydCBjb29yZGluYXRlcycpO1xuXG4gIC8vIGBnZXRfdG9wX2xlZnRfY29vcmRpbmF0ZXNgIHJldHVybnMgdGhlIHdyb25nIHZhbHVlIHNvbWV0aW1lcyxcbiAgLy8gdW5sZXNzIHdlIHByZS1jYWxsIGJvdGggb2YgdGhlc2UgZnVuY3Rpb25zIGJlZm9yZSB0aGUgYWN0dWFsIGNhbGxzXG4gIGF3YWl0IEIuUHJvbWlzZS5hbGwoW1xuICAgIHRoaXMuZXhlY3V0ZUF0b20oJ2dldF9zaXplJywgW2F0b21zRWxlbWVudF0pLFxuICAgIHRoaXMuZXhlY3V0ZUF0b20oJ2dldF90b3BfbGVmdF9jb29yZGluYXRlcycsIFthdG9tc0VsZW1lbnRdKSxcbiAgXSk7XG5cbiAgY29uc3QgW3NpemUsIGNvb3JkaW5hdGVzXSA9IGF3YWl0IEIuUHJvbWlzZS5hbGwoW1xuICAgIHRoaXMuZXhlY3V0ZUF0b20oJ2dldF9zaXplJywgW2F0b21zRWxlbWVudF0pLFxuICAgIHRoaXMuZXhlY3V0ZUF0b20oJ2dldF90b3BfbGVmdF9jb29yZGluYXRlcycsIFthdG9tc0VsZW1lbnRdKSxcbiAgXSk7XG4gIGNvbnN0IHt3aWR0aCwgaGVpZ2h0fSA9IHNpemU7XG4gIGxldCB7eCwgeX0gPSBjb29yZGluYXRlcztcbiAgeCArPSB3aWR0aCAvIDI7XG4gIHkgKz0gaGVpZ2h0IC8gMjtcblxuICB0aGlzLmN1cldlYkNvb3JkcyA9IHt4LCB5fTtcbiAgYXdhaXQgdGhpcy5jbGlja1dlYkNvb3JkcygpO1xufTtcblxuZXh0ZW5zaW9ucy5jbGlja0Nvb3JkcyA9IGFzeW5jIGZ1bmN0aW9uIGNsaWNrQ29vcmRzIChjb29yZHMpIHtcbiAgYXdhaXQgdGhpcy5wZXJmb3JtVG91Y2goW1xuICAgIHtcbiAgICAgIGFjdGlvbjogJ3RhcCcsXG4gICAgICBvcHRpb25zOiBjb29yZHMsXG4gICAgfSxcbiAgXSk7XG59O1xuXG5leHRlbnNpb25zLnRyYW5zbGF0ZVdlYkNvb3JkcyA9IGFzeW5jIGZ1bmN0aW9uIHRyYW5zbGF0ZVdlYkNvb3JkcyAoY29vcmRzKSB7XG4gIHRoaXMubG9nLmRlYnVnKGBUcmFuc2xhdGluZyBjb29yZGluYXRlcyAoJHtKU09OLnN0cmluZ2lmeShjb29yZHMpfSkgdG8gd2ViIGNvb3JkaW5hdGVzYCk7XG5cbiAgLy8gYWJzb2x1dGl6ZSB3ZWIgY29vcmRzXG4gIGxldCB3ZWJ2aWV3O1xuICB0cnkge1xuICAgIHdlYnZpZXcgPSBhd2FpdCByZXRyeUludGVydmFsKDUsIDEwMCwgYXN5bmMgKCkgPT4gYXdhaXQgdGhpcy5maW5kTmF0aXZlRWxlbWVudE9yRWxlbWVudHMoJ2NsYXNzIG5hbWUnLCAnWENVSUVsZW1lbnRUeXBlV2ViVmlldycsIGZhbHNlKSk7XG4gIH0gY2F0Y2ggKGlnbikge31cblxuICBpZiAoIXdlYnZpZXcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIFdlYlZpZXcgZm91bmQuIFVuYWJsZSB0byB0cmFuc2xhdGUgd2ViIGNvb3JkaW5hdGVzIGZvciBuYXRpdmUgd2ViIHRhcC5gKTtcbiAgfVxuXG4gIHdlYnZpZXcgPSB1dGlsLnVud3JhcEVsZW1lbnQod2Vidmlldyk7XG5cbiAgY29uc3QgcmVjdCA9IGF3YWl0IHRoaXMucHJveHlDb21tYW5kKGAvZWxlbWVudC8ke3dlYnZpZXd9L3JlY3RgLCAnR0VUJyk7XG4gIGNvbnN0IHd2UG9zID0ge3g6IHJlY3QueCwgeTogcmVjdC55fTtcbiAgY29uc3QgcmVhbERpbXMgPSB7dzogcmVjdC53aWR0aCwgaDogcmVjdC5oZWlnaHR9O1xuXG4gIGNvbnN0IGNtZCA9ICcoZnVuY3Rpb24gKCkgeyByZXR1cm4ge3c6IHdpbmRvdy5pbm5lcldpZHRoLCBoOiB3aW5kb3cuaW5uZXJIZWlnaHR9OyB9KSgpJztcbiAgY29uc3Qgd3ZEaW1zID0gYXdhaXQgdGhpcy5yZW1vdGUuZXhlY3V0ZShjbWQpO1xuXG4gIC8vIGtlZXAgdHJhY2sgb2YgaW1wbGljaXQgd2FpdCwgYW5kIHNldCBsb2NhbGx5IHRvIDBcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2FwcGl1bS9hcHBpdW0vaXNzdWVzLzE0OTg4XG4gIGNvbnN0IGltcGxpY2l0V2FpdE1zID0gdGhpcy5pbXBsaWNpdFdhaXRNcztcbiAgYXdhaXQgdGhpcy5zZXRJbXBsaWNpdFdhaXQoMCk7XG4gIHRyeSB7XG4gICAgYXdhaXQgdGhpcy5nZXRFeHRyYVRyYW5zbGF0ZVdlYkNvb3Jkc09mZnNldCh3dlBvcywgcmVhbERpbXMpO1xuICB9IGZpbmFsbHkge1xuICAgIGF3YWl0IHRoaXMuc2V0SW1wbGljaXRXYWl0KGltcGxpY2l0V2FpdE1zKTtcbiAgfVxuXG4gIGlmICh3dkRpbXMgJiYgcmVhbERpbXMgJiYgd3ZQb3MpIHtcbiAgICBsZXQgeFJhdGlvID0gcmVhbERpbXMudyAvIHd2RGltcy53O1xuICAgIGxldCB5UmF0aW8gPSByZWFsRGltcy5oIC8gd3ZEaW1zLmg7XG4gICAgbGV0IG5ld0Nvb3JkcyA9IHtcbiAgICAgIHg6IHd2UG9zLnggKyBNYXRoLnJvdW5kKHhSYXRpbyAqIGNvb3Jkcy54KSxcbiAgICAgIHk6IHd2UG9zLnkgKyBNYXRoLnJvdW5kKHlSYXRpbyAqIGNvb3Jkcy55KSxcbiAgICB9O1xuXG4gICAgLy8gYWRkaXRpb25hbCBsb2dnaW5nIGZvciBjb29yZGluYXRlcywgc2luY2UgaXQgaXMgc29tZXRpbWVzIGJyb2tlblxuICAgIC8vICAgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9hcHBpdW0vYXBwaXVtL2lzc3Vlcy85MTU5XG4gICAgdGhpcy5sb2cuZGVidWcoYENvbnZlcnRlZCBjb29yZGluYXRlczogJHtKU09OLnN0cmluZ2lmeShuZXdDb29yZHMpfWApO1xuICAgIHRoaXMubG9nLmRlYnVnKGAgICAgcmVjdDogJHtKU09OLnN0cmluZ2lmeShyZWN0KX1gKTtcbiAgICB0aGlzLmxvZy5kZWJ1ZyhgICAgIHd2UG9zOiAke0pTT04uc3RyaW5naWZ5KHd2UG9zKX1gKTtcbiAgICB0aGlzLmxvZy5kZWJ1ZyhgICAgIHJlYWxEaW1zOiAke0pTT04uc3RyaW5naWZ5KHJlYWxEaW1zKX1gKTtcbiAgICB0aGlzLmxvZy5kZWJ1ZyhgICAgIHd2RGltczogJHtKU09OLnN0cmluZ2lmeSh3dkRpbXMpfWApO1xuICAgIHRoaXMubG9nLmRlYnVnKGAgICAgeFJhdGlvOiAke0pTT04uc3RyaW5naWZ5KHhSYXRpbyl9YCk7XG4gICAgdGhpcy5sb2cuZGVidWcoYCAgICB5UmF0aW86ICR7SlNPTi5zdHJpbmdpZnkoeVJhdGlvKX1gKTtcblxuICAgIHRoaXMubG9nLmRlYnVnKGBDb252ZXJ0ZWQgd2ViIGNvb3JkcyAke0pTT04uc3RyaW5naWZ5KGNvb3Jkcyl9IGAgK1xuICAgICAgYGludG8gcmVhbCBjb29yZHMgJHtKU09OLnN0cmluZ2lmeShuZXdDb29yZHMpfWApO1xuICAgIHJldHVybiBuZXdDb29yZHM7XG4gIH1cbn07XG5cbmV4dGVuc2lvbnMuY2hlY2tGb3JBbGVydCA9IGFzeW5jIGZ1bmN0aW9uIGNoZWNrRm9yQWxlcnQgKCkge1xuICByZXR1cm4gXy5pc1N0cmluZyhhd2FpdCB0aGlzLmdldEFsZXJ0VGV4dCgpKTtcbn07XG5cbmV4dGVuc2lvbnMud2FpdEZvckF0b20gPSBhc3luYyBmdW5jdGlvbiB3YWl0Rm9yQXRvbSAocHJvbWlzZSkge1xuICBjb25zdCB0aW1lciA9IG5ldyB0aW1pbmcuVGltZXIoKS5zdGFydCgpO1xuXG4gIC8vIG5lZWQgdG8gY2hlY2sgZm9yIGFsZXJ0IHdoaWxlIHRoZSBhdG9tIGlzIGJlaW5nIGV4ZWN1dGVkLlxuICAvLyBzbyBub3RpZnkgb3Vyc2VsdmVzIHdoZW4gaXQgaGFwcGVuc1xuICBjb25zdCB0aW1lZEF0b21Qcm9taXNlID0gQi5yZXNvbHZlKHByb21pc2UpLnRpbWVvdXQoQVRPTV9XQUlUX1RJTUVPVVRfTVMpO1xuICBjb25zdCBoYW5kbGVQcm9taXNlRXJyb3IgPSBhc3luYyAocCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgcDtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnN0IG9yaWdpbmFsRXJyb3IgPSAoZXJyIGluc3RhbmNlb2YgQi5BZ2dyZWdhdGVFcnJvcikgPyBlcnJbMF0gOiBlcnI7XG4gICAgICB0aGlzLmxvZy5kZWJ1ZyhgRXJyb3IgcmVjZWl2ZWQgd2hpbGUgZXhlY3V0aW5nIGF0b206ICR7b3JpZ2luYWxFcnJvci5tZXNzYWdlfWApO1xuICAgICAgaWYgKG9yaWdpbmFsRXJyb3IgaW5zdGFuY2VvZiBCLlRpbWVvdXRFcnJvcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYERpZCBub3QgZ2V0IGFueSByZXNwb25zZSBmb3IgYXRvbSBleGVjdXRpb24gYWZ0ZXIgYCArXG4gICAgICAgICAgYCR7dGltZXIuZ2V0RHVyYXRpb24oKS5hc01pbGxpU2Vjb25kcy50b0ZpeGVkKDApfW1zYCk7XG4gICAgICB9XG4gICAgICB0aHJvdyBvcmlnaW5hbEVycm9yO1xuICAgIH1cbiAgfTtcbiAgLy8gaWYgdGhlIGF0b20gcHJvbWlzZSBpcyBmdWxmaWxsZWQgd2l0aGluIEFUT01fSU5JVElBTF9XQUlUX01TXG4gIC8vIHRoZW4gd2UgZG9uJ3QgbmVlZCB0byBjaGVjayBmb3IgYW4gYWxlcnQgcHJlc2VuY2VcbiAgYXdhaXQgaGFuZGxlUHJvbWlzZUVycm9yKEIuYW55KFtCLmRlbGF5KEFUT01fSU5JVElBTF9XQUlUX01TKSwgdGltZWRBdG9tUHJvbWlzZV0pKTtcbiAgaWYgKHRpbWVkQXRvbVByb21pc2UuaXNGdWxmaWxsZWQoKSkge1xuICAgIHJldHVybiBhd2FpdCB0aW1lZEF0b21Qcm9taXNlO1xuICB9XG5cbiAgLy8gLi4ub3RoZXJ3aXNlIG1ha2Ugc3VyZSB0aGVyZSBpcyBubyB1bmV4cGVjdGVkIGFsZXJ0IGNvdmVyaW5nIHRoZSBlbGVtZW50XG4gIGlmICghXy5pc1BsYWluT2JqZWN0KHRoaXMuX3dhaXRpbmdBdG9tcykpIHtcbiAgICB0aGlzLl93YWl0aW5nQXRvbXMgPSB7XG4gICAgICBjb3VudDogMCxcbiAgICAgIGFsZXJ0Tm90aWZpZXI6IG5ldyBFdmVudEVtaXR0ZXIoKSxcbiAgICAgIGFsZXJ0TW9uaXRvcjogQi5yZXNvbHZlKCksXG4gICAgfTtcbiAgfVxuICB0aGlzLl93YWl0aW5nQXRvbXMuY291bnQrKztcblxuICBsZXQgb25BbGVydENhbGxiYWNrO1xuICB0cnkge1xuICAgIC8vIG9ubHkgcmVzdGFydCB0aGUgbW9uaXRvciBpZiBpdCBpcyBub3QgcnVubmluZyBhbHJlYWR5XG4gICAgaWYgKHRoaXMuX3dhaXRpbmdBdG9tcy5hbGVydE1vbml0b3IuaXNSZXNvbHZlZCgpKSB7XG4gICAgICB0aGlzLl93YWl0aW5nQXRvbXMuYWxlcnRNb25pdG9yID0gQi5yZXNvbHZlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIHdoaWxlICh0aGlzLl93YWl0aW5nQXRvbXMuY291bnQgPiAwKSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChhd2FpdCB0aGlzLmNoZWNrRm9yQWxlcnQoKSkge1xuICAgICAgICAgICAgICB0aGlzLl93YWl0aW5nQXRvbXMuYWxlcnROb3RpZmllci5lbWl0KE9OX09CU1RSVUNUSU5HX0FMRVJUX0VWRU5UKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGNhdGNoIChpZ24pIHt9XG4gICAgICAgICAgYXdhaXQgQi5kZWxheShBVE9NX0lOSVRJQUxfV0FJVF9NUyAvIDIpO1xuICAgICAgICB9XG4gICAgICB9KSgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gYXdhaXQgbmV3IEIoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgb25BbGVydENhbGxiYWNrID0gKCkgPT4gcmVqZWN0KG5ldyBlcnJvcnMuVW5leHBlY3RlZEFsZXJ0T3BlbkVycm9yKCkpO1xuICAgICAgdGhpcy5fd2FpdGluZ0F0b21zLmFsZXJ0Tm90aWZpZXIub25jZShPTl9PQlNUUlVDVElOR19BTEVSVF9FVkVOVCwgb25BbGVydENhbGxiYWNrKTtcbiAgICAgIGhhbmRsZVByb21pc2VFcnJvcih0aW1lZEF0b21Qcm9taXNlKVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJvbWlzZS9wcmVmZXItYXdhaXQtdG8tdGhlblxuICAgICAgICAudGhlbihyZXNvbHZlKVxuICAgICAgICAuY2F0Y2gocmVqZWN0KTtcbiAgICB9KTtcbiAgfSBmaW5hbGx5IHtcbiAgICBpZiAob25BbGVydENhbGxiYWNrKSB7XG4gICAgICB0aGlzLl93YWl0aW5nQXRvbXMuYWxlcnROb3RpZmllci5yZW1vdmVMaXN0ZW5lcihPTl9PQlNUUlVDVElOR19BTEVSVF9FVkVOVCwgb25BbGVydENhbGxiYWNrKTtcbiAgICB9XG4gICAgdGhpcy5fd2FpdGluZ0F0b21zLmNvdW50LS07XG4gIH1cbn07XG5cbmV4dGVuc2lvbnMubW9iaWxlV2ViTmF2ID0gYXN5bmMgZnVuY3Rpb24gbW9iaWxlV2ViTmF2IChuYXZUeXBlKSB7XG4gIHRoaXMucmVtb3RlLmFsbG93TmF2aWdhdGlvbldpdGhvdXRSZWxvYWQgPSB0cnVlO1xuICB0cnkge1xuICAgIGF3YWl0IHRoaXMuZXhlY3V0ZUF0b20oJ2V4ZWN1dGVfc2NyaXB0JywgW2BoaXN0b3J5LiR7bmF2VHlwZX0oKTtgLCBudWxsXSk7XG4gIH0gZmluYWxseSB7XG4gICAgdGhpcy5yZW1vdGUuYWxsb3dOYXZpZ2F0aW9uV2l0aG91dFJlbG9hZCA9IGZhbHNlO1xuICB9XG59O1xuXG5PYmplY3QuYXNzaWduKGNvbW1hbmRzLCBleHRlbnNpb25zLCBoZWxwZXJzKTtcblxuZXhwb3J0IGRlZmF1bHQgY29tbWFuZHM7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBRUEsTUFBTUEscUJBQXFCLEdBQUcsRUFBOUI7QUFDQSxNQUFNQyw4QkFBOEIsR0FBRyxFQUF2QztBQUNBLE1BQU1DLHdCQUF3QixHQUFHLEVBQWpDO0FBQ0EsTUFBTUMseUJBQXlCLEdBQUcsRUFBbEM7QUFDQSxNQUFNQyw0QkFBNEIsR0FBRyxFQUFyQztBQUVBLE1BQU1DLCtCQUErQixHQUFHLEVBQXhDO0FBQ0EsTUFBTUMsd0JBQXdCLEdBQUcsRUFBakM7QUFDQSxNQUFNQyxjQUFjLEdBQUcsRUFBdkI7QUFDQSxNQUFN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