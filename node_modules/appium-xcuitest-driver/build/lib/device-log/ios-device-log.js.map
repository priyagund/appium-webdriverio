{"version":3,"file":"ios-device-log.js","names":["log","logger","getLogger","IOSDeviceLog","IOSLog","constructor","opts","udid","showLogs","service","startCapture","services","startSyslogService","start","onLog","bind","logLine","broadcast","info","isCapturing","stopCapture","close"],"sources":["../../../lib/device-log/ios-device-log.js"],"sourcesContent":["import { logger } from 'appium/support';\nimport { IOSLog } from './ios-log';\nimport { services } from 'appium-ios-device';\n\nconst log = logger.getLogger('IOSDeviceLog');\n\nclass IOSDeviceLog extends IOSLog {\n\n  constructor (opts) {\n    super();\n    this.udid = opts.udid;\n    this.showLogs = !!opts.showLogs;\n    this.service = null;\n  }\n\n  async startCapture () {\n    if (this.service) {\n      return;\n    }\n    this.service = await services.startSyslogService(this.udid);\n    this.service.start(this.onLog.bind(this));\n  }\n\n  onLog (logLine) {\n    this.broadcast(logLine);\n    if (this.showLogs) {\n      log.info(logLine);\n    }\n  }\n\n  get isCapturing () {\n    return !!this.service;\n  }\n\n  stopCapture () {\n    if (!this.service) {\n      return;\n    }\n    this.service.close();\n    this.service = null;\n  }\n}\n\nexport { IOSDeviceLog };\nexport default IOSDeviceLog;\n"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;AAEA,MAAMA,GAAG,GAAGC,eAAA,CAAOC,SAAP,CAAiB,cAAjB,CAAZ;;AAEA,MAAMC,YAAN,SAA2BC,cAA3B,CAAkC;EAEhCC,WAAW,CAAEC,IAAF,EAAQ;IACjB;IACA,KAAKC,IAAL,GAAYD,IAAI,CAACC,IAAjB;IACA,KAAKC,QAAL,GAAgB,CAAC,CAACF,IAAI,CAACE,QAAvB;IACA,KAAKC,OAAL,GAAe,IAAf;EACD;;EAEiB,MAAZC,YAAY,GAAI;IACpB,IAAI,KAAKD,OAAT,EAAkB;MAChB;IACD;;IACD,KAAKA,OAAL,GAAe,MAAME,yBAAA,CAASC,kBAAT,CAA4B,KAAKL,IAAjC,CAArB;IACA,KAAKE,OAAL,CAAaI,KAAb,CAAmB,KAAKC,KAAL,CAAWC,IAAX,CAAgB,IAAhB,CAAnB;EACD;;EAEDD,KAAK,CAAEE,OAAF,EAAW;IACd,KAAKC,SAAL,CAAeD,OAAf;;IACA,IAAI,KAAKR,QAAT,EAAmB;MACjBR,GAAG,CAACkB,IAAJ,CAASF,OAAT;IACD;EACF;;EAEc,IAAXG,WAAW,GAAI;IACjB,OAAO,CAAC,CAAC,KAAKV,OAAd;EACD;;EAEDW,WAAW,GAAI;IACb,IAAI,CAAC,KAAKX,OAAV,EAAmB;MACjB;IACD;;IACD,KAAKA,OAAL,CAAaY,KAAb;IACA,KAAKZ,OAAL,GAAe,IAAf;EACD;;AAlC+B;;;eAsCnBN,Y"}